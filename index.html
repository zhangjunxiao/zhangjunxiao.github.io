<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <title>张俊啸的博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="张俊啸的博客">
<meta property="og:url" content="http://zhangjunxiao.github.io.git/index.html">
<meta property="og:site_name" content="张俊啸的博客">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="张俊啸的博客">
  
    <link rel="alternative" href="/atom.xml" title="张俊啸的博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/img/sishi.png">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="/img/sishi.png" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">张俊啸</a></h1>
		</hgroup>

		
		<p class="header-subtitle">swift3.0版本</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>Menu</li>
						<li>Tags</li>
						
						<li>Links</li>
						
						
						<li>About</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/zhangjunxiao" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="http://weibo.com/p/1005052122753860/home?profile_ftype=1&is_all=1#_0" title="weibo">weibo</a>
					        
								<a class="rss" target="_blank" href="#" title="rss">rss</a>
					        
								<a class="zhihu" target="_blank" href="#" title="zhihu">zhihu</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/NFC/" style="font-size: 10px;">NFC</a> <a href="/tags/PHP/" style="font-size: 15px;">PHP</a> <a href="/tags/Swift/" style="font-size: 15px;">Swift</a> <a href="/tags/Swift-mapkit/" style="font-size: 10px;">Swift mapkit</a> <a href="/tags/blog主题设置/" style="font-size: 10px;">blog主题设置</a> <a href="/tags/mysql/" style="font-size: 10px;">mysql</a> <a href="/tags/python/" style="font-size: 20px;">python</a> <a href="/tags/yii框架/" style="font-size: 15px;">yii框架</a> <a href="/tags/命令行/" style="font-size: 10px;">命令行</a> <a href="/tags/芒果的个人信息/" style="font-size: 10px;">芒果的个人信息</a>
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">奥巴马的博客</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">卡卡的美丽传说</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">本泽马的博客</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">吉格斯的博客</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">习大大大不同</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">托蒂的博客</a>
			        
			        </div>
				</section>
				

				
				
				<section class="switch-part switch-part4">
				
					<div id="js-aboutme">1.2121121212121232e+22</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">张俊啸</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
			
				<img lazy-src="/img/sishi.png" class="js-avatar">
			
			</div>
			<hgroup>
			  <h1 class="header-author">张俊啸</h1>
			</hgroup>
			
			<p class="header-subtitle">swift3.0版本</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/zhangjunxiao" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/p/1005052122753860/home?profile_ftype=1&is_all=1#_0" title="weibo">weibo</a>
			        
						<a class="rss" target="_blank" href="#" title="rss">rss</a>
			        
						<a class="zhihu" target="_blank" href="#" title="zhihu">zhihu</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap">
  
    <article id="post-python-同步数据库文件" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/02/10/python-同步数据库文件/" class="article-date">
  	<time datetime="2017-02-10T03:34:20.000Z" itemprop="datePublished">2017-02-10</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/10/python-同步数据库文件/">python 同步数据库文件</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="同步数据库文件"><a href="#同步数据库文件" class="headerlink" title="同步数据库文件"></a>同步数据库文件</h3><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div></pre></td><td class="code"><pre><div class="line">#!/usr/bin/python</div><div class="line"># coding=utf-8</div><div class="line"></div><div class="line">import os</div><div class="line">import time</div><div class="line">import MySQLdb</div><div class="line">import re</div><div class="line">import datetime</div><div class="line"></div><div class="line"># 获取数据库备份文件</div><div class="line"># 源数据主机 信息</div><div class="line">user = "zzz"</div><div class="line">host = "111.111.11.1"</div><div class="line">host_file_path = "/path"</div><div class="line"></div><div class="line"># 数据库配置</div><div class="line">mysql_host = "localhost"</div><div class="line">mysql_user = "</div><div class="line">#mysql_passwd = "xxxxx"</div><div class="line">mysql_db = "youwa"</div><div class="line">mysql_charset = "utf8"</div><div class="line">mysql_socket ="/soft/mysql/mysql.sock"</div><div class="line"></div><div class="line"># 路径配置</div><div class="line"># 本机文件存储路径</div><div class="line">save_file_path =os.getcwd()+"/mysql_back_up"</div><div class="line">#</div><div class="line">mysql_file_save_path = save_file_path+"/mysql"</div><div class="line"></div><div class="line">try:</div><div class="line">    if not os.path.exists(save_file_path):</div><div class="line">        os.makedirs(save_file_path)</div><div class="line">    #scp_str = "scp %s@%s:%s%s.tar.bz2 -C %s" % (user, host, host_file_path, time.strftime("%Y%m%d"), save_file_path)</div><div class="line">    scp_str = "scp %s@%s:%s%s.tar.bz2  %s" % (user, host, host_file_path, time.strftime("%Y%m%d"), save_file_path)</div><div class="line"></div><div class="line">    child = os.system(scp_str)</div><div class="line">    print scp_str</div><div class="line">    print child</div><div class="line">    if child != 0:</div><div class="line">        print "拷贝数据库出错"</div><div class="line">        exit(0)</div><div class="line"></div><div class="line">    file_name = "%s/%s.tar.bz2" % (save_file_path, time.strftime("%Y%m%d"))</div><div class="line">    if not os.path.exists(file_name):</div><div class="line">        print "备份文件不存在"</div><div class="line">        exit(0)</div><div class="line"></div><div class="line">    tar_str = "tar -jxvf "+file_name+" -C "+save_file_path</div><div class="line"></div><div class="line">    status = os.system(tar_str)</div><div class="line">    print "\n"</div><div class="line">    print tar_str</div><div class="line"></div><div class="line">    if status != 0:</div><div class="line">        print "解压文件失败"</div><div class="line">        exit(0)</div><div class="line"></div><div class="line">    msyql_file_list = os.listdir(mysql_file_save_path)</div><div class="line"></div><div class="line">    db = MySQLdb.connect(host=mysql_host, user=mysql_user, charset=mysql_charset,unix_socket=mysql_socket)</div><div class="line">    cursor = db.cursor()</div><div class="line">    # 获取 所有 database</div><div class="line">    db_list = []</div><div class="line">    cursor.execute("show databases;")</div><div class="line">    for db_name in cursor.fetchall():</div><div class="line">        db_list.append(db_name[0])</div><div class="line"></div><div class="line">    for mysql_file_name in msyql_file_list:</div><div class="line">        database_name = mysql_file_name.split('.sql')[0]</div><div class="line">        if database_name not in db_list:</div><div class="line">            cursor.execute("create database `%s`" % database_name)</div><div class="line">        cursor.execute("use `%s`;" % database_name)</div><div class="line">        statement = ""</div><div class="line">        # 过滤注释</div><div class="line">        mysql_file = mysql_file_save_path+"/"+mysql_file_name</div><div class="line">        print "同步 %s 数据库数据中" % database_name</div><div class="line">        for line in open(mysql_file):</div><div class="line">            if re.match(r'--', line):  # ignore sql comment lines</div><div class="line">                continue</div><div class="line">            if not re.search(r'[^-;]+;$', line):  # keep appending lines that don't end in ';'</div><div class="line">                statement = statement + line</div><div class="line">            else:  # when you get a line ending in ';' then exec statement and reset for next statement</div><div class="line">                statement = statement + line</div><div class="line">                # print "\n\n[DEBUG] Executing SQL statement:\n%s" % (statement)</div><div class="line">                try:</div><div class="line">                    # print statement</div><div class="line">                    if statement:</div><div class="line">                        cursor.execute(statement)</div><div class="line">                except (MySQLdb.OperationalError, MySQLdb.ProgrammingError) as e:</div><div class="line">                    print "\n[WARN] MySQLError during execute statement \n\tArgs: '%s'" % (str(e.args))</div><div class="line">                statement = ""</div><div class="line"></div><div class="line">    # db.commit()</div><div class="line">    db.close()</div><div class="line"></div><div class="line">    print "同步 youwa_server"</div><div class="line">    status = os.system("mysqldump -uroot --opt youwa | mysql -uroot -C youwa_server")</div><div class="line">    if status == 0:</div><div class="line">        print "数据同步完成"</div><div class="line">    else:</div><div class="line">        print "youwa_server 同步失败"</div><div class="line"></div><div class="line">    # 删除解压文件</div><div class="line">    rm_str = "rm -irf ./mysql_back_up/mysql"</div><div class="line">    result = os.system(rm_str)</div><div class="line">    sql_file_list = os.listdir("./mysql_back_up/")</div><div class="line"></div><div class="line">    # 删除过期备份文件 备份时间30天</div><div class="line">    current_date = time.strftime("%Y%m%d")</div><div class="line">    limit_day = datetime.datetime.strptime(current_date, "%Y%m%d") - datetime.timedelta(days=30)</div><div class="line">    for sql_file in sql_file_list:</div><div class="line">        file_create_day = datetime.datetime.strptime(sql_file.split('.')[0], "%Y%m%d")</div><div class="line">        if file_create_day &lt; limit_day:</div><div class="line">            rm_str = "rm -irf ./mysql_back_up/"+sql_file</div><div class="line">            result = os.system(rm_str)</div><div class="line">    exit(0)</div><div class="line">except Exception, e:</div><div class="line">    print e</div><div class="line">    exit(0)</div></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-python-导入数据库文件" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/02/10/python-导入数据库文件/" class="article-date">
  	<time datetime="2017-02-10T03:33:39.000Z" itemprop="datePublished">2017-02-10</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/10/python-导入数据库文件/">python 导入数据库文件</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="方法1"><a href="#方法1" class="headerlink" title="方法1"></a>方法1</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> mysql_file_name <span class="keyword">in</span> msyql_file_list:</div><div class="line">       database_name = mysql_file_name.split(<span class="string">'.sql'</span>)[<span class="number">0</span>]</div><div class="line">       <span class="keyword">if</span> database_name <span class="keyword">not</span> <span class="keyword">in</span> db_list:</div><div class="line">           cursor.execute(<span class="string">"create database `%s`"</span> % database_name)</div><div class="line">       cursor.execute(<span class="string">"use `%s`;"</span> % database_name)</div><div class="line">       statement = <span class="string">""</span></div><div class="line">       <span class="comment"># 过滤注释</span></div><div class="line">       mysql_file = mysql_file_save_path+<span class="string">"/"</span>+mysql_file_name</div><div class="line">       <span class="keyword">print</span> <span class="string">"同步 %s 数据库数据中"</span> % database_name</div><div class="line">       <span class="keyword">for</span> line <span class="keyword">in</span> open(mysql_file):</div><div class="line">           <span class="keyword">if</span> re.match(<span class="string">r'--'</span>, line):  <span class="comment"># ignore sql comment lines</span></div><div class="line">               <span class="keyword">continue</span></div><div class="line">           <span class="keyword">if</span> <span class="keyword">not</span> re.search(<span class="string">r'[^-;]+;$'</span>, line):  <span class="comment"># keep appending lines that don't end in ';'</span></div><div class="line">               statement = statement + line</div><div class="line">           <span class="keyword">else</span>:  <span class="comment"># when you get a line ending in ';' then exec statement and reset for next statement</span></div><div class="line">               statement = statement + line</div><div class="line">               <span class="comment"># print "\n\n[DEBUG] Executing SQL statement:\n%s" % (statement)</span></div><div class="line">               <span class="keyword">try</span>:</div><div class="line">                   <span class="comment"># print statement</span></div><div class="line">                   <span class="keyword">if</span> statement:</div><div class="line">                       cursor.execute(statement)</div><div class="line">               <span class="keyword">except</span> (MySQLdb.OperationalError, MySQLdb.ProgrammingError) <span class="keyword">as</span> e:</div><div class="line">                   <span class="keyword">print</span> <span class="string">"\n[WARN] MySQLError during execute statement \n\tArgs: '%s'"</span> % (str(e.args))</div><div class="line">               statement = <span class="string">""</span></div><div class="line"></div><div class="line">   <span class="comment"># db.commit()</span></div><div class="line">   db.close()</div></pre></td></tr></table></figure>
<h3 id="方法2"><a href="#方法2" class="headerlink" title="方法2"></a>方法2</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">msyql_file_list = os.listdir(mysql_file_save_path)</div><div class="line">db = MySQLdb.connect(host=mysql_host, user=mysql_user, charset=mysql_charset,unix_socket=mysql_socket)</div><div class="line">cursor = db.cursor()</div><div class="line"><span class="comment"># 获取 所有 database</span></div><div class="line">db_list = []</div><div class="line">cursor.execute(<span class="string">"show databases;"</span>)</div><div class="line"><span class="keyword">for</span> db_name <span class="keyword">in</span> cursor.fetchall():</div><div class="line">    db_list.append(db_name[<span class="number">0</span>])</div><div class="line"></div><div class="line"><span class="keyword">for</span> mysql_file_name <span class="keyword">in</span> msyql_file_list:</div><div class="line">    database_name = mysql_file_name.split(<span class="string">'.sql'</span>)[<span class="number">0</span>]</div><div class="line">    <span class="keyword">if</span> database_name <span class="keyword">not</span> <span class="keyword">in</span> db_list:</div><div class="line">        cursor.execute(<span class="string">"create database `%s`"</span> % database_name)</div><div class="line">    cursor.execute(<span class="string">"use `%s`;"</span> % database_name)</div><div class="line">    statement = <span class="string">""</span></div><div class="line">    <span class="comment"># 过滤注释</span></div><div class="line">    mysql_file = mysql_file_save_path+<span class="string">"/"</span>+mysql_file_name</div><div class="line">    <span class="keyword">print</span> <span class="string">"同步 %s 数据库数据中"</span> % database_name</div><div class="line">    sql = open(mysql_file).read()</div><div class="line">    cursor.execute(sql)</div><div class="line">    cursor.commit()</div><div class="line">cursor.close()</div><div class="line">db.commit()</div><div class="line">db.close()</div></pre></td></tr></table></figure>
<h3 id="方法3"><a href="#方法3" class="headerlink" title="方法3"></a>方法3</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">msyql_file_list = os.listdir(mysql_file_save_path)</div><div class="line"></div><div class="line">    db = MySQLdb.connect(host=mysql_host, user=mysql_user, charset=mysql_charset,unix_socket=mysql_socket)</div><div class="line">    cursor = db.cursor()</div><div class="line">    <span class="comment"># 获取 所有 database</span></div><div class="line">    db_list = []</div><div class="line">    cursor.execute(<span class="string">"show databases;"</span>)</div><div class="line">    <span class="keyword">for</span> db_name <span class="keyword">in</span> cursor.fetchall():</div><div class="line">        db_list.append(db_name[<span class="number">0</span>])</div><div class="line"></div><div class="line">    <span class="keyword">for</span> mysql_file_name <span class="keyword">in</span> msyql_file_list:</div><div class="line">        database_name = mysql_file_name.split(<span class="string">'.sql'</span>)[<span class="number">0</span>]</div><div class="line">        <span class="keyword">if</span> database_name <span class="keyword">not</span> <span class="keyword">in</span> db_list:</div><div class="line">            cursor.execute(<span class="string">"create database `%s`"</span> % database_name)</div><div class="line">        cursor.execute(<span class="string">"use `%s`;"</span> % database_name)</div><div class="line">        statement = <span class="string">""</span></div><div class="line">        <span class="comment"># 过滤注释</span></div><div class="line">        mysql_file = mysql_file_save_path+<span class="string">"/"</span>+mysql_file_name</div><div class="line">        <span class="keyword">print</span> <span class="string">"同步 %s 数据库数据中"</span> % database_name</div><div class="line">        cmd = <span class="string">"mysqldump -u%s %s &lt; %s"</span> %(mysql_user, mysql_name, mysql_file)</div><div class="line">        status = os.system(cmd)</div><div class="line">        <span class="keyword">if</span> status ==<span class="number">0</span> :</div><div class="line">          <span class="keyword">print</span> <span class="string">"同步 %s 数据库完成"</span> % database_name</div><div class="line">        <span class="keyword">else</span> :</div><div class="line">          <span class="keyword">print</span> <span class="string">"同步 %s 数据库失败"</span> % database_name</div><div class="line">    cursor.close()</div><div class="line">    db.commit()</div><div class="line">    db.close()</div></pre></td></tr></table></figure>
<h3 id="方法遇到的问题：2006-MySQL-server-has-gone-away"><a href="#方法遇到的问题：2006-MySQL-server-has-gone-away" class="headerlink" title="方法遇到的问题：2006 - MySQL server has gone away"></a>方法遇到的问题：2006 - MySQL server has gone away</h3><p>Message: MySQL server has gone away<br>原因可能是sql语句过长，超过mysql通信缓存区最大长度；</p>
<p>调整mysql配置文件中max_allowed_packet<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line"># Example MySQL config file for medium systems.</div><div class="line">#</div><div class="line"># This is for a system with little memory (32M - 64M) where MySQL plays</div><div class="line"># an important part, or systems up to 128M where MySQL is used together with</div><div class="line"># other programs (such as a web server)</div><div class="line">#</div><div class="line"># You can copy this file to</div><div class="line"># /etc/my.cnf to set global options,</div><div class="line"># mysql-data-dir/my.cnf to set server-specific options (in this</div><div class="line"># installation this directory is C:\mysql\data) or</div><div class="line"># ~/.my.cnf to set user-specific options.</div><div class="line">#</div><div class="line"># In this file, you can use all long options that a program supports.</div><div class="line"># If you want to know which options a program supports, run the program</div><div class="line"># with the &quot;--help&quot; option.</div><div class="line"></div><div class="line"># The following options will be passed to all MySQL clients</div><div class="line">[client]</div><div class="line">#password   = your_password</div><div class="line">port        = 3306</div><div class="line">socket      = /tmp/mysql.sock</div><div class="line"></div><div class="line"># Here follows entries for some specific programs</div><div class="line"></div><div class="line"># The MySQL server</div><div class="line">[wampmysqld]</div><div class="line">#mysql端口</div><div class="line">port        = 3306</div><div class="line">socket      = /tmp/mysql.sock</div><div class="line">#索引缓存区，决定你索引查询时能访问速度</div><div class="line">key_buffer_size = 16M</div><div class="line">#通信缓存区最大长度，决定你sql语句中字符串最大长度</div><div class="line">max_allowed_packet = 1M</div><div class="line">#排序缓存区，决定你orderby的速度</div><div class="line">sort_buffer_size = 512K</div><div class="line">#通信缓存区大小，查询时默认该值为通信缓存区大小，若不够会自动增加直到达到max_allowed_packe</div><div class="line">net_buffer_length = 8K</div><div class="line"></div><div class="line">read_buffer_size = 256K</div><div class="line">read_rnd_buffer_size = 512K</div><div class="line">myisam_sort_buffer_size = 8M</div></pre></td></tr></table></figure></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-mysql-while-循环-性能测试-具体用法" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/02/08/mysql-while-循环-性能测试-具体用法/" class="article-date">
  	<time datetime="2017-02-08T01:52:47.000Z" itemprop="datePublished">2017-02-08</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/08/mysql-while-循环-性能测试-具体用法/">mysql while 循环 性能测试 具体用法</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="while-循环使用方法"><a href="#while-循环使用方法" class="headerlink" title="while 循环使用方法"></a>while 循环使用方法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">delimiter $ -- 定义结束符为 $</div><div class="line">drop procedure if exists pro; --删除存储过程</div><div class="line">create procedure pro()   --创建存储过程</div><div class="line">begin</div><div class="line">declare i int;</div><div class="line">set i = 0;</div><div class="line">WHILE i&lt;11 do --循环次数</div><div class="line"> select * from tweet; --需要修改 对比的测试语句</div><div class="line"> set i = i+1;</div><div class="line">end WHILE;</div><div class="line">end</div><div class="line">$  --结束</div><div class="line"></div><div class="line">call pro(); --调用存储过程</div></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mysql/">mysql</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Mac下使用ACR122u-A9-安装及使用" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/12/19/Mac下使用ACR122u-A9-安装及使用/" class="article-date">
  	<time datetime="2016-12-19T01:16:15.000Z" itemprop="datePublished">2016-12-19</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/12/19/Mac下使用ACR122u-A9-安装及使用/">Mac下使用ACR122u-A9 安装及使用</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="安装nfc-tool之libnfc"><a href="#安装nfc-tool之libnfc" class="headerlink" title="安装nfc-tool之libnfc"></a>安装nfc-tool之libnfc</h4><p>github地址： <em><a href="https://github.com/nfc-tools/libnfc" target="_blank" rel="external">https://github.com/nfc-tools/libnfc</a></em></p>
<h5 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h5><blockquote>
<ul>
<li>pn53x_usb &amp; acr122_usb:</li>
<li>libusb-0.1 <a href="http://libusb.sf.net" target="_blank" rel="external">http://libusb.sf.net</a></li>
<li><p>homebrew 安装命令： brew install libusb</p>
</li>
<li><p>acr122_pcsc:</p>
</li>
<li>pcsc-lite <a href="http://pcsclite.alioth.debian.org/" target="_blank" rel="external">http://pcsclite.alioth.debian.org/</a></li>
<li>homebrew 安装命令： brew install pcsc-lite</li>
</ul>
</blockquote>
<h5 id="貌似是单元测试模块的框架"><a href="#貌似是单元测试模块的框架" class="headerlink" title="貌似是单元测试模块的框架"></a>貌似是单元测试模块的框架</h5><blockquote>
<ul>
<li>The regression test suite depends on the cutter framework: <a href="http://cutter.sf.net" target="_blank" rel="external">http://cutter.sf.net</a></li>
<li>homebrew 安装命令：brew install cutter</li>
</ul>
</blockquote>
<h5 id="安装-libnfc"><a href="#安装-libnfc" class="headerlink" title="安装 libnfc"></a>安装 libnfc</h5><blockquote>
<ul>
<li>homebrew 安装命令：brew install libnfc</li>
</ul>
</blockquote>
<h5 id="安装-libfreefare"><a href="#安装-libfreefare" class="headerlink" title="安装 libfreefare"></a>安装 libfreefare</h5><blockquote>
<ul>
<li>homebrew 安装命令：brew install libfreefare</li>
</ul>
</blockquote>
<h5 id="安装MFOC"><a href="#安装MFOC" class="headerlink" title="安装MFOC"></a>安装MFOC</h5><blockquote>
<ul>
<li>homebrew 安装命令：brew install mfoc</li>
</ul>
</blockquote>
<p>####使用<br><em>nfc-list -v</em> 查看一下设备列表<br>MFOC(Mifare Classic Offline Cracker)是一款离线的认证嵌套攻击工具<br><em>mfoc -h </em>查看帮助文档<br>使用方法参考文档<br>Arch Linux上使用ACR122U破解鲜奶卡  <a href="http://www.tuicool.com/articles/3QZbume" target="_blank" rel="external">http://www.tuicool.com/articles/3QZbume</a><br>RFID破解三两事 <a href="http://www.freebuf.com/articles/wireless/8792.html" target="_blank" rel="external">http://www.freebuf.com/articles/wireless/8792.html</a> </p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/NFC/">NFC</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-php-报错级别设置-屏蔽notice-级别" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/12/09/php-报错级别设置-屏蔽notice-级别/" class="article-date">
  	<time datetime="2016-12-09T02:40:43.000Z" itemprop="datePublished">2016-12-09</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/12/09/php-报错级别设置-屏蔽notice-级别/">php 报错级别设置 屏蔽notice 级别 </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="报错级别设置"><a href="#报错级别设置" class="headerlink" title="报错级别设置"></a>报错级别设置</h3><p>常规设置： 输出phpinfo() 查看 php.ini 的路径<br>/usr/local/php5/lib/php.ini</p>
<p>修改 error_reporting<br>默认 error_reporting = E_ALL<br>改为  error_reporting = E_ALL &amp; ～ E_NOTICE</p>
<p>修改 log_error = On<br>退出 vi<br>/usr/local/run/php-fpm reload</p>
<p>输出phpinfo()<br>error_reporting 值依旧未变</p>
<p>错误原因</p>
<ol>
<li><p>搜索了下，发现有人说当log_errors开启时，如果error_log的路径不对，会导致报错显示，php-fpm 运行的用户：组 对error_log的路径 无读写权限时，依旧会输出所有错误</p>
</li>
<li><p>/usr/local/php5/etc/php-fpm.conf</p>
<blockquote>
<p>; Additional php.ini defines, specific to this pool of workers. These settings<br>; overwrite the values previously defined in the php.ini. The directives are the<br>; same as the PHP SAPI:<br>;   php_value/php_flag             - you can set classic ini defines which can<br>;                                    be overwritten from PHP call ‘ini_set’.<br>;   php_admin_value/php_admin_flag - these directives won’t be overwritten by<br>;                                     PHP call ‘ini<em>set’<br>; For php</em>*flag, valid values are on, off, 1, 0, true, false, yes or no.</p>
<p>; Defining ‘extension’ will load the corresponding shared extension from<br>; extension_dir. Defining ‘disable_functions’ or ‘disable_classes’ will not<br>; overwrite previously defined php.ini values, but will append the new value<br>; instead.</p>
<p>; Note: path INI options can be relative and will be expanded with the prefix<br>; (pool, global or /usr/local/php5)</p>
<p>; Default Value: nothing is defined by default except the values in php.ini and<br>;                specified at startup with the -d argument<br>;php_admin_value[sendmail_path] = /usr/sbin/sendmail -t -i -f www@my.domain.com<br>;php_flag[display_errors] = On<br>php_admin_value[error_log] = /usr/local/php5/var/log/php_error.log<br>;php_admin_flag[log_errors] = On<br>;php_admin_value[memory_limit] = 32M<br>php_admin_value[error_reporting] = 22519</p>
</blockquote>
</li>
</ol>
<blockquote>
<p>这边的设置会强制覆盖 php.ini 的设置  所以可以强制 在这里设置想要的值</p>
</blockquote>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/PHP/">PHP</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-python-os模块help" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/12/08/python-os模块help/" class="article-date">
  	<time datetime="2016-12-08T01:33:00.000Z" itemprop="datePublished">2016-12-08</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/12/08/python-os模块help/">python os模块help()</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Last login: Thu Dec  8 08:55:24 on ttys002<br>zhangjunxiaodeMacBook-Pro:~ junxiaozhang$ python -v</p>
<blockquote>
<p><em># installing zipimport hook
</em>import zipimport # builtin<br><em># installed zipimport hook
</em># /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site.pyc matches /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site.py<br><em>import site # precompiled from /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site.pyc
</em># /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/os.pyc matches /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/os.py<br><em>import os # precompiled from /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/os.pyc
</em>import errno # builtin<br><em>import posix # builtin
</em># /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/posixpath.pyc matches /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/posixpath.py<br><em>import posixpath # precompiled from /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/posixpath.pyc
</em># /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/stat.pyc matches /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/stat.py<br><em>import stat # precompiled from /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/stat.pyc
</em># /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/genericpath.pyc matches /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/genericpath.py<br><em>import genericpath # precompiled from /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/genericpath.pyc
</em># /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/warnings.pyc matches /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/warnings.py<br><em>import warnings # precompiled from /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/warnings.pyc
</em># /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/linecache.pyc matches /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/linecache.py<br><em>import linecache # precompiled from /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/linecache.pyc
</em># /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/types.pyc matches /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/types.py<br><em>import types # precompiled from /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/types.pyc
</em># /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/UserDict.pyc matches /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/UserDict.py<br><em>import UserDict # precompiled from /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/UserDict.pyc
</em># /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/_abcoll.pyc matches /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/_abcoll.py<br><em>import _abcoll # precompiled from /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/_abcoll.pyc
</em># /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/abc.pyc matches /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/abc.py<br><em>import abc # precompiled from /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/abc.pyc
</em># /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/_weakrefset.pyc matches /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/_weakrefset.py<br><em>import _weakrefset # precompiled from /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/_weakrefset.pyc
</em>import _weakref # builtin<br><em># /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/copy_reg.pyc matches /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/copy_reg.py
</em>import copy_reg # precompiled from /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/copy_reg.pyc<br><em># /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/traceback.pyc matches /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/traceback.py
</em>import traceback # precompiled from /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/traceback.pyc<br><em># /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/sysconfig.pyc matches /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/sysconfig.py
</em>import sysconfig # precompiled from /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/sysconfig.pyc<br><em># /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/re.pyc matches /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/re.py
</em>import re # precompiled from /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/re.pyc<br><em># /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/sre_compile.pyc matches /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/sre_compile.py
</em>import sre_compile # precompiled from /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/sre_compile.pyc<br><em>*import _sre # builtin
</em># /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/sre_parse.pyc matches /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/sre_parse.py<br><em>import sre_parse # precompiled from /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/sre_parse.pyc
</em># /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/sre_constants.pyc matches /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/sre_constants.py<br><em>import sre_constants # precompiled from /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/sre_constants.pyc
</em>dlopen(“/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-dynload/_locale.so”, 2);<br><em>import _locale # dynamically loaded from /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-dynload/_locale.so
</em># /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/_sysconfigdata.pyc matches /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/_sysconfigdata.py<br><em>import _sysconfigdata # precompiled from /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/_sysconfigdata.pyc
</em># /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/_osx_support.pyc matches /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/_osx_support.py<br><em>import _osx_support # precompiled from /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/_osx_support.pyc
</em># zipimport: found 13 names in /Library/Python/2.7/site-packages/python_nmap-0.6.1-py2.7.egg<br><em># zipimport: found 17 names in /Library/Python/2.7/site-packages/pyPdf-1.13-py2.7.egg
</em># zipimport: found 13 names in /Library/Python/2.7/site-packages/pygeoip-0.3.2-py2.7.egg<br><em># zipimport: found 63 names in /Library/Python/2.7/site-packages/mechanize-0.2.5-py2.7.egg
</em># zipimport: found 40 names in /Library/Python/2.7/site-packages/beautifulsoup4-4.5.1-py2.7.egg<br><em>import encodings # directory /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/encodings
</em># /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/encodings/<strong>init</strong>.pyc matches /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/encodings/<strong>init</strong>.py<br><em>import encodings # precompiled from /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/encodings/<strong>init</strong>.pyc
</em># /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/codecs.pyc matches /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/codecs.py<br><em>import codecs # precompiled from /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/codecs.pyc
</em>import _codecs # builtin<br><em># /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/encodings/aliases.pyc matches /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/encodings/aliases.py
</em>import encodings.aliases # precompiled from /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/encodings/aliases.pyc<br><em># /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/encodings/utf_8.pyc matches /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/encodings/utf_8.py
</em>import encodings.utf_8 # precompiled from /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/encodings/utf<em>8.pyc<br><em>Python 2.7.10 (default, Jul 30 2016, 18:31:42)
</em>[GCC 4.2.1 Compatible Apple LLVM 8.0.0 (clang-800.0.34)] on darwin<br><em>Type “help”, “copyright”, “credits” or “license” for more information.
</em>dlopen(“/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-dynload/readline.so”, 2);<br><em>import readline # dynamically loaded from /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-dynload/readline.so
</em>&gt;&gt;&gt; exit(0)<br>*# clear <strong>builtin</strong>.</em><br><em># clear sys.path
</em># clear sys.argv<br><em># clear sys.ps1
</em># clear sys.ps2<br><em># clear sys.exitfunc
</em># clear sys.exc_type<br><em># clear sys.exc_value
</em># clear sys.exc_traceback<br><em># clear sys.last_type
</em># clear sys.last_value<br><em># clear sys.last_traceback
</em># clear sys.path_hooks<br><em># clear sys.path_importer_cache
</em># clear sys.meta_path<br><em># clear sys.flags
</em># clear sys.float_info<br><em># restore sys.stdin
</em># restore sys.stdout<br><em># restore sys.stderr
</em># cleanup <strong>main</strong><br><em># cleanup[1] encodings
</em># cleanup[1] site<br><em># cleanup[1] sysconfig
</em># cleanup[1] abc<br><em># cleanup[1] _weakrefset
</em># cleanup[1] sre_constants<br><em># cleanup[1] _codecs
</em># cleanup[1] _warnings<br><em># cleanup[1] zipimport
</em># cleanup[1] _sysconfigdata<br><em># cleanup[1] encodings.utf_8
</em># cleanup[1] _osx_support<br><em># cleanup[1] codecs
</em># cleanup[1] readline<br><em># cleanup[1] signal
</em># cleanup[1] traceback<br><em># cleanup[1] posix
</em># cleanup[1] encodings.aliases<br><em># cleanup[1] exceptions
</em># cleanup[1] _weakref<br><em># cleanup[1] re
</em># cleanup[1] _locale<br><em># cleanup[1] sre_compile
</em># cleanup[1] _sre<br><em># cleanup[1] sre_parse
</em># cleanup[2] copy_reg<br><em># cleanup[2] posixpath
</em># cleanup[2] errno<br><em># cleanup[2] _abcoll
</em># cleanup[2] types<br><em># cleanup[2] genericpath
</em># cleanup[2] stat<br><em># cleanup[2] warnings
</em># cleanup[2] UserDict<br><em># cleanup[2] os.path
</em># cleanup[2] linecache<br><em># cleanup[2] os
</em># cleanup sys<br><em># cleanup <strong>builtin</strong>
</em># cleanup ints: 860 unfreed ints<br><em># cleanup floats
</em>zhangjunxiaodeMacBook-Pro:~ junxiaozhang$ ls<br><em>Applications        Movies            android            workSpace_Eclipse
</em>Desktop            Music            data            www<br><em>Documents        Pictures        document
</em>Downloads        Public            home<br><em>Library            WeFlow_workspace    soft
</em>zhangjunxiaodeMacBook-Pro:~ junxiaozhang$ cd www/<br><em>.DS_Store              .tmtworkflowrc         javaScript_workspace/  weixin-little-program/
</em>.bowerrc               advanced/              phpinfo.php            workflow-workspace/<br><em>.idea/                 basic/                 python_workspace/      youwa-h5/
</em>zhangjunxiaodeMacBook-Pro:~ junxiaozhang$ cd www/python_workspace/<br><em>.idea/         exchange_rate/
</em>zhangjunxiaodeMacBook-Pro:~ junxiaozhang$ cd www/python_workspace/<br><em>.idea/         exchange_rate/
</em>zhangjunxiaodeMacBook-Pro:~ junxiaozhang$ cd www/python_workspace/exchange_rate/<br><em>.git/       .gitignore  .idea/      CHs_book/   README.md   hack/       source/
</em>zhangjunxiaodeMacBook-Pro:~ junxiaozhang$ cd www/python_workspace/exchange_rate/<br><em>.git/       .gitignore  .idea/      CHs_book/   README.md   hack/       source/
</em>zhangjunxiaodeMacBook-Pro:~ junxiaozhang$ cd www/python_workspace/exchange_rate/<br><em>zhangjunxiaodeMacBook-Pro:exchange_rate junxiaozhang$ python -help
</em>Unknown option: -e<br><em>usage: python [option] … [-c cmd | -m mod | file | -] [arg] …
</em>Try `python -h’ for more information.<br><em>zhangjunxiaodeMacBook-Pro:exchange_rate junxiaozhang$ python help
</em>python: can’t open file ‘help’: [Errno 2] No such file or directory<br><em>zhangjunxiaodeMacBook-Pro:exchange_rate junxiaozhang$ python version
</em>python: can’t open file ‘version’: [Errno 2] No such file or directory<br><em>zhangjunxiaodeMacBook-Pro:exchange_rate junxiaozhang$ python -V
</em>Python 2.7.10<br><em>zhangjunxiaodeMacBook-Pro:exchange_rate junxiaozhang$ python
</em>Python 2.7.10 (default, Jul 30 2016, 18:31:42)<br><em>[GCC 4.2.1 Compatible Apple LLVM 8.0.0 (clang-800.0.34)] on darwin
</em>Type “help”, “copyright”, “credits” or “license” for more information.<br><em>&gt;&gt;&gt; import os
</em>&gt;&gt;&gt; help(os)<br>*</p>
<ul>
<li>O_NONBLOCK = 4</li>
<li>O_RDONLY = 0</li>
<li>O_RDWR = 2</li>
<li>O_SHLOCK = 16</li>
<li>O_SYNC = 128</li>
<li>O_TRUNC = 1024</li>
<li>O_WRONLY = 1</li>
<li>R_OK = 4</li>
<li>SEEK_CUR = 1</li>
<li>SEEK_END = 2</li>
<li>SEEK_SET = 0</li>
<li>TMP_MAX = 308915776</li>
<li>WCONTINUED = 16</li>
<li>WNOHANG = 1</li>
<li>WUNTRACED = 2</li>
<li>W_OK = 2</li>
<li>X_OK = 1</li>
<li><strong>all</strong> = [‘altsep’, ‘curdir’, ‘pardir’, ‘sep’, ‘extsep’, ‘pathsep’, ‘…</li>
<li>altsep = None</li>
<li>confstr_names = {‘CS_DARWIN_USER_CACHE_DIR’: 65538, ‘CS_DARWIN_USER_DI…</li>
<li>curdir = ‘.’</li>
<li>defpath = ‘:/bin:/usr/bin’</li>
<li>devnull = ‘/dev/null’</li>
<li>environ = {‘VERSIONER_PYTHON_PREFER_32_BIT’: ‘no’, ‘LC_CTY…junxiaozh…</li>
<li>extsep = ‘.’</li>
<li>linesep = ‘\n’</li>
<li>name = ‘posix’</li>
<li>pardir = ‘..’</li>
<li>pathconf_names = {‘PC_ASYNC_IO’: 17, ‘PC_CHOWN_RESTRICTED’: 7, ‘PC_FIL…</li>
<li>pathsep = ‘:’</li>
<li>sep = ‘/‘</li>
<li>sysconf_names = {‘SC_2_CHAR_TERM’: 20, ‘SC_2_C_BIND’: 18, ‘SC_2_C_DEV’…</li>
</ul>
</blockquote>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-mac-下查看端口占用" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/12/08/mac-下查看端口占用/" class="article-date">
  	<time datetime="2016-12-08T00:13:41.000Z" itemprop="datePublished">2016-12-08</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/12/08/mac-下查看端口占用/">mac 下查看端口占用</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="lsof-i-tcp-port-port为端口号，例如-9000-80）"><a href="#lsof-i-tcp-port-port为端口号，例如-9000-80）" class="headerlink" title="lsof -i tcp:port (port为端口号，例如 9000 80）"></a>lsof -i tcp:port (port为端口号，例如 9000 80）</h3>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/命令行/">命令行</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-mac-php多版本-命令行版本与服务器-phpino-版本不符合" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/12/07/mac-php多版本-命令行版本与服务器-phpino-版本不符合/" class="article-date">
  	<time datetime="2016-12-07T03:42:18.000Z" itemprop="datePublished">2016-12-07</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/12/07/mac-php多版本-命令行版本与服务器-phpino-版本不符合/">mac php多版本  命令行版本与服务器 phpino() 版本不符合 </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h3><p> terminal 运行 php -v 获取版本号如下<br> PHP 7.1.0 (cli) (built: Dec  2 2016 09:19:56) ( NTS )<br>Copyright (c) 1997-2016 The PHP Group<br>Zend Engine v3.1.0-dev, Copyright (c) 1998-2016 Zend Technologies<br>    with Zend OPcache v7.1.0, Copyright (c) 1999-2016, by Zend Technologies<br>nginx+php-fpm 输出 phpinfo()<br>获取信息如下：<br>PHP Version 5.6.19</p>
<h3 id="解决问题"><a href="#解决问题" class="headerlink" title="解决问题"></a>解决问题</h3><p>php-fpm  脚本执行的PHP 是 /usr/bin/php<br>命令行脚本 执行的 PHP 因为在配置文件 ~/.profile 中配置了<br>export PATH=/usr/local/php5/bin:$PATH<br>所以 执行的PHP 是 usr/local/php5</p>
<p>修改 /usr/local/run/php-fpm</p>
<p>prefix=/usr/local/php</p>
<p>改为</p>
<p>prefix=/usr/local/php5</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/PHP/">PHP</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-python-日期时间" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/11/16/python-日期时间/" class="article-date">
  	<time datetime="2016-11-16T02:23:38.000Z" itemprop="datePublished">2016-11-16</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/16/python-日期时间/">python 日期时间</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>python中时间日期格式化符号：<br>%y 两位数的年份表示（00-99）<br>%Y 四位数的年份表示（000-9999）<br>%m 月份（01-12）<br>%d 月内中的一天（0-31）<br>%H 24小时制小时数（0-23）<br>%I 12小时制小时数（01-12）<br>%M 分钟数（00=59）<br>%S 秒（00-59）<br>%a 本地简化星期名称<br>%A 本地完整星期名称<br>%b 本地简化的月份名称<br>%B 本地完整的月份名称<br>%c 本地相应的日期表示和时间表示<br>%j 年内的一天（001-366）<br>%p 本地A.M.或P.M.的等价符<br>%U 一年中的星期数（00-53）星期天为星期的开始<br>%w 星期（0-6），星期天为星期的开始<br>%W 一年中的星期数（00-53）星期一为星期的开始<br>%x 本地相应的日期表示<br>%X 本地相应的时间表示<br>%Z 当前时区的名称<br>%% %号本身</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-芒果的信息" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/10/17/芒果的信息/" class="article-date">
  	<time datetime="2016-10-17T03:34:34.000Z" itemprop="datePublished">2016-10-17</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/10/17/芒果的信息/">芒果的信息</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="芒果的个人简介"><a href="#芒果的个人简介" class="headerlink" title="芒果的个人简介"></a>芒果的个人简介</h3><p>  2个月大的小比熊，活泼，好动。<br>  <img src="http://ww1.sinaimg.cn/orj480/7e86a744gw1f8wflhn94dj20qo0zkdkw.jpg" alt=""></p>
<h4 id="住址"><a href="#住址" class="headerlink" title="住址"></a>住址</h4><p>  泰州市海陵区东润首府1栋501。</p>
<h4 id="捡屎官"><a href="#捡屎官" class="headerlink" title="捡屎官"></a>捡屎官</h4><p>  周萌 18724022320</p>
<h4 id="主人"><a href="#主人" class="headerlink" title="主人"></a>主人</h4><p>  张俊啸 15062205276 周萌 1872402320</p>
<h4 id="如有遗失，请联系铲屎官！送还给予报酬¥200，报销路费。"><a href="#如有遗失，请联系铲屎官！送还给予报酬¥200，报销路费。" class="headerlink" title="如有遗失，请联系铲屎官！送还给予报酬¥200，报销路费。"></a>如有遗失，请联系铲屎官！送还给予报酬¥200，报销路费。</h4><h5 id="非常感谢"><a href="#非常感谢" class="headerlink" title="非常感谢"></a>非常感谢</h5>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/芒果的个人信息/">芒果的个人信息</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2017 张俊啸
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script src="/js/main.js"></script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  </div>
</body>
</html>