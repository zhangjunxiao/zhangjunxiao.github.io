<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <title>张俊啸的博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="张俊啸的博客">
<meta property="og:url" content="http://zhangjunxiao.github.io.git/index.html">
<meta property="og:site_name" content="张俊啸的博客">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="张俊啸的博客">
  
    <link rel="alternative" href="/atom.xml" title="张俊啸的博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/img/sishi.png">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="/img/sishi.png" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">张俊啸</a></h1>
		</hgroup>

		
		<p class="header-subtitle">swift3.0版本</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>Menu</li>
						<li>Tags</li>
						
						<li>Links</li>
						
						
						<li>Über</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/zhangjunxiao" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="http://weibo.com/p/1005052122753860/home?profile_ftype=1&is_all=1#_0" title="weibo">weibo</a>
					        
								<a class="rss" target="_blank" href="#" title="rss">rss</a>
					        
								<a class="zhihu" target="_blank" href="#" title="zhihu">zhihu</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/PHP/" style="font-size: 10px;">PHP</a> <a href="/tags/Swift/" style="font-size: 20px;">Swift</a> <a href="/tags/Swift-mapkit/" style="font-size: 10px;">Swift mapkit</a> <a href="/tags/blog主题设置/" style="font-size: 10px;">blog主题设置</a> <a href="/tags/python/" style="font-size: 10px;">python</a> <a href="/tags/yii框架/" style="font-size: 20px;">yii框架</a> <a href="/tags/命令行/" style="font-size: 10px;">命令行</a> <a href="/tags/芒果的个人信息/" style="font-size: 10px;">芒果的个人信息</a>
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">奥巴马的博客</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">卡卡的美丽传说</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">本泽马的博客</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">吉格斯的博客</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">习大大大不同</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">托蒂的博客</a>
			        
			        </div>
				</section>
				

				
				
				<section class="switch-part switch-part4">
				
					<div id="js-aboutme">1.2121121212121232e+22</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">张俊啸</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
			
				<img lazy-src="/img/sishi.png" class="js-avatar">
			
			</div>
			<hgroup>
			  <h1 class="header-author">张俊啸</h1>
			</hgroup>
			
			<p class="header-subtitle">swift3.0版本</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/zhangjunxiao" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/p/1005052122753860/home?profile_ftype=1&is_all=1#_0" title="weibo">weibo</a>
			        
						<a class="rss" target="_blank" href="#" title="rss">rss</a>
			        
						<a class="zhihu" target="_blank" href="#" title="zhihu">zhihu</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap">
  
    <article id="post-mac-下查看端口占用" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/12/08/mac-下查看端口占用/" class="article-date">
  	<time datetime="2016-12-08T00:13:41.000Z" itemprop="datePublished">2016-12-08</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/12/08/mac-下查看端口占用/">mac 下查看端口占用</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="lsof-i-tcp-port-port为端口号，例如-9000-80）"><a href="#lsof-i-tcp-port-port为端口号，例如-9000-80）" class="headerlink" title="lsof -i tcp:port (port为端口号，例如 9000 80）"></a>lsof -i tcp:port (port为端口号，例如 9000 80）</h3>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/命令行/">命令行</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-mac-php多版本-命令行版本与服务器-phpino-版本不符合" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/12/07/mac-php多版本-命令行版本与服务器-phpino-版本不符合/" class="article-date">
  	<time datetime="2016-12-07T03:42:18.000Z" itemprop="datePublished">2016-12-07</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/12/07/mac-php多版本-命令行版本与服务器-phpino-版本不符合/">mac php多版本  命令行版本与服务器 phpino() 版本不符合 </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h3><p> terminal 运行 php -v 获取版本号如下<br> PHP 7.1.0 (cli) (built: Dec  2 2016 09:19:56) ( NTS )<br>Copyright (c) 1997-2016 The PHP Group<br>Zend Engine v3.1.0-dev, Copyright (c) 1998-2016 Zend Technologies<br>    with Zend OPcache v7.1.0, Copyright (c) 1999-2016, by Zend Technologies<br>nginx+php-fpm 输出 phpinfo()<br>获取信息如下：<br>PHP Version 5.6.19</p>
<h3 id="解决问题"><a href="#解决问题" class="headerlink" title="解决问题"></a>解决问题</h3><p>php-fpm  脚本执行的PHP 是 /usr/bin/php<br>命令行脚本 执行的 PHP 因为在配置文件 ~/.profile 中配置了<br>export PATH=/usr/local/php5/bin:$PATH<br>所以 执行的PHP 是 usr/local/php5</p>
<p>修改 /usr/local/run/php-fpm</p>
<p>prefix=/usr/local/php</p>
<p>改为</p>
<p>prefix=/usr/local/php5</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/PHP/">PHP</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-python-日期时间" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/11/16/python-日期时间/" class="article-date">
  	<time datetime="2016-11-16T02:23:38.000Z" itemprop="datePublished">2016-11-16</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/16/python-日期时间/">python 日期时间</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>python中时间日期格式化符号：<br>%y 两位数的年份表示（00-99）<br>%Y 四位数的年份表示（000-9999）<br>%m 月份（01-12）<br>%d 月内中的一天（0-31）<br>%H 24小时制小时数（0-23）<br>%I 12小时制小时数（01-12）<br>%M 分钟数（00=59）<br>%S 秒（00-59）<br>%a 本地简化星期名称<br>%A 本地完整星期名称<br>%b 本地简化的月份名称<br>%B 本地完整的月份名称<br>%c 本地相应的日期表示和时间表示<br>%j 年内的一天（001-366）<br>%p 本地A.M.或P.M.的等价符<br>%U 一年中的星期数（00-53）星期天为星期的开始<br>%w 星期（0-6），星期天为星期的开始<br>%W 一年中的星期数（00-53）星期一为星期的开始<br>%x 本地相应的日期表示<br>%X 本地相应的时间表示<br>%Z 当前时区的名称<br>%% %号本身</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-芒果的信息" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/10/17/芒果的信息/" class="article-date">
  	<time datetime="2016-10-17T03:34:34.000Z" itemprop="datePublished">2016-10-17</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/10/17/芒果的信息/">芒果的信息</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="芒果的个人简介"><a href="#芒果的个人简介" class="headerlink" title="芒果的个人简介"></a>芒果的个人简介</h3><p>  2个月大的小比熊，活泼，好动。<br>  <img src="http://ww1.sinaimg.cn/orj480/7e86a744gw1f8wflhn94dj20qo0zkdkw.jpg" alt=""></p>
<h4 id="住址"><a href="#住址" class="headerlink" title="住址"></a>住址</h4><p>  泰州市海陵区东润首府1栋501。</p>
<h4 id="捡屎官"><a href="#捡屎官" class="headerlink" title="捡屎官"></a>捡屎官</h4><p>  周萌 18724022320</p>
<h4 id="主人"><a href="#主人" class="headerlink" title="主人"></a>主人</h4><p>  张俊啸 15062205276 周萌 1872402320</p>
<h4 id="如有遗失，请联系铲屎官！送还给予报酬¥200，报销路费。"><a href="#如有遗失，请联系铲屎官！送还给予报酬¥200，报销路费。" class="headerlink" title="如有遗失，请联系铲屎官！送还给予报酬¥200，报销路费。"></a>如有遗失，请联系铲屎官！送还给予报酬¥200，报销路费。</h4><h5 id="非常感谢"><a href="#非常感谢" class="headerlink" title="非常感谢"></a>非常感谢</h5>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/芒果的个人信息/">芒果的个人信息</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-yii框架配置" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/08/31/yii框架配置/" class="article-date">
  	<time datetime="2016-08-31T01:34:41.000Z" itemprop="datePublished">2016-08-31</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/08/31/yii框架配置/">配置</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><p>在 Yii 中，创建新对象和初始化已存在对象时广泛使用配置。配置通常包含被创建对象的类名和一组将要赋值给对象属性的初始值。还可能包含一组将被附加到对象事件上的句柄。和一组将被附加到对象上的行为。</p>
<p>以下代码中的配置被用来创建并初始化一个数据库连接：<br><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">$config = [</div><div class="line">    <span class="string">'class'</span> =&gt; <span class="string">'yii\db\Connection'</span>,</div><div class="line">    <span class="string">'dsn'</span> =&gt; <span class="string">'mysql:host=127.0.0.1;dbname=demo'</span>,</div><div class="line">    <span class="string">'username'</span> =&gt; <span class="string">'root'</span>,</div><div class="line">    <span class="string">'password'</span> =&gt; <span class="string">''</span>,</div><div class="line">    <span class="string">'charset'</span> =&gt; <span class="string">'utf8'</span>,</div><div class="line">];</div><div class="line"></div><div class="line">$db = Yii::createObject($config);</div></pre></td></tr></table></figure></p>
<p><em>Yii::createObject()</em> 方法接受一个配置数组并根据数组中指定的类名创建对象。对象实例化后，剩余的参数被用来初始化对象的属性，事件处理和行为。</p>
<p>对于已存在的对象，可以使用 <em>Yii::configure()</em> 方法根据配置去初始化其属性，就像这样：</p>
<p><em>Yii::configure($object, $config);</em><br>请注意，如果配置一个已存在的对象，那么配置数组中不应该包含指定类名的 class 元素。</p>
<p>配置的格式</p>
<p>一个配置的格式可以描述为以下形式：<br><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[</div><div class="line">    <span class="string">'class'</span> =&gt; <span class="string">'ClassName'</span>,</div><div class="line">    <span class="string">'propertyName'</span> =&gt; <span class="string">'propertyValue'</span>,</div><div class="line">    <span class="string">'on eventName'</span> =&gt; $eventHandler,</div><div class="line">    <span class="string">'as behaviorName'</span> =&gt; $behaviorConfig,</div><div class="line">]</div></pre></td></tr></table></figure></p>
<p>其中</p>
<blockquote>
<ul>
<li>class 元素指定了将要创建的对象的完全限定类名。</li>
<li>propertyName 元素指定了对象属性的初始值。键名是属性名，值是该属性对应的初始值。只有公共成员变量以及通过 getter/setter 定义的属性可以被配置。</li>
<li>on eventName 元素指定了附加到对象事件上的句柄是什么。请注意，数组的键名由 on 前缀加事件名组成。请参考事件章节了解事件句柄格式。</li>
<li>as behaviorName 元素指定了附加到对象的行为。请注意，数组的键名由 as 前缀加行为名组成。$behaviorConfig 值表示创建行为的配置信息，格式与我们之前描述的配置格式一样。<br>下面是一个配置了初始化属性值，事件句柄和行为的示例：<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">[</div><div class="line">    <span class="string">'class'</span> =&gt; <span class="string">'app\components\SearchEngine'</span>,</div><div class="line">    <span class="string">'apiKey'</span> =&gt; <span class="string">'xxxxxxxx'</span>,</div><div class="line">    <span class="string">'on search'</span> =&gt; <span class="function"><span class="keyword">function</span> <span class="params">($event)</span> </span>&#123;</div><div class="line">        Yii::info(<span class="string">"搜索的关键词： "</span> . $event-&gt;keyword);</div><div class="line">    &#125;,</div><div class="line">    <span class="string">'as indexer'</span> =&gt; [</div><div class="line">        <span class="string">'class'</span> =&gt; <span class="string">'app\components\IndexerBehavior'</span>,</div><div class="line">        <span class="comment">// ... 初始化属性值 ...</span></div><div class="line">    ],</div><div class="line">]</div></pre></td></tr></table></figure>
</li>
</ul>
</blockquote>
<h4 id="使用配置"><a href="#使用配置" class="headerlink" title="使用配置"></a>使用配置</h4><p>Yii 中的配置可以用在很多场景。本章开头我们展示了如何使用 Yii::creatObject() 根据配置信息创建对象。本小节将介绍配置的两种主要用法 —— <em>配置应用与配置小部件</em>。</p>
<h4 id="应用的配置"><a href="#应用的配置" class="headerlink" title="应用的配置"></a>应用的配置</h4><p>应用的配置可能是最复杂的配置之一。因为 <em><strong>yii\web\Application</strong></em>类拥有很多可配置的属性和事件。更重要的是它的 <em>yii\web\Application::components</em> 属性可以接收配置数组并通过应用注册为组件。以下是一个针对基础应用模板的应用配置概要：<br><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">$config = [</div><div class="line">    <span class="string">'id'</span> =&gt; <span class="string">'basic'</span>,</div><div class="line">    <span class="string">'basePath'</span> =&gt; dirname(<span class="keyword">__DIR__</span>),</div><div class="line">    <span class="string">'extensions'</span> =&gt; <span class="keyword">require</span>(<span class="keyword">__DIR__</span> . <span class="string">'/../vendor/yiisoft/extensions.php'</span>),</div><div class="line">    <span class="string">'components'</span> =&gt; [</div><div class="line">        <span class="string">'cache'</span> =&gt; [</div><div class="line">            <span class="string">'class'</span> =&gt; <span class="string">'yii\caching\FileCache'</span>,</div><div class="line">        ],</div><div class="line">        <span class="string">'mailer'</span> =&gt; [</div><div class="line">            <span class="string">'class'</span> =&gt; <span class="string">'yii\swiftmailer\Mailer'</span>,</div><div class="line">        ],</div><div class="line">        <span class="string">'log'</span> =&gt; [</div><div class="line">            <span class="string">'class'</span> =&gt; <span class="string">'yii\log\Dispatcher'</span>,</div><div class="line">            <span class="string">'traceLevel'</span> =&gt; YII_DEBUG ? <span class="number">3</span> : <span class="number">0</span>,</div><div class="line">            <span class="string">'targets'</span> =&gt; [</div><div class="line">                [</div><div class="line">                    <span class="string">'class'</span> =&gt; <span class="string">'yii\log\FileTarget'</span>,</div><div class="line">                ],</div><div class="line">            ],</div><div class="line">        ],</div><div class="line">        <span class="string">'db'</span> =&gt; [</div><div class="line">            <span class="string">'class'</span> =&gt; <span class="string">'yii\db\Connection'</span>,</div><div class="line">            <span class="string">'dsn'</span> =&gt; <span class="string">'mysql:host=localhost;dbname=stay2'</span>,</div><div class="line">            <span class="string">'username'</span> =&gt; <span class="string">'root'</span>,</div><div class="line">            <span class="string">'password'</span> =&gt; <span class="string">''</span>,</div><div class="line">            <span class="string">'charset'</span> =&gt; <span class="string">'utf8'</span>,</div><div class="line">        ],</div><div class="line">    ],</div><div class="line">];</div></pre></td></tr></table></figure></p>
<p>配置中没有 class 键的原因是这段配置应用在下面的入口脚本中，类名已经指定了。<br><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">(<span class="keyword">new</span> yii\web\Application($config))-&gt;run();</div></pre></td></tr></table></figure></p>
<p>更多关于应用 components 属性配置的信息可以查阅<strong>应用以及服务定位器</strong>章节。</p>
<h4 id="小部件的配置"><a href="#小部件的配置" class="headerlink" title="小部件的配置"></a>小部件的配置</h4><p>使用小部件时，常常需要配置以便自定义其属性。 <em>yii\base\Widget::widget()</em> 和 <em>yii\base\Widget::begin()</em> 方法都可以用来创建小部件。它们可以接受配置数组：<br><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">use</span> <span class="title">yii</span>\<span class="title">widgets</span>\<span class="title">Menu</span>;</div><div class="line"></div><div class="line"><span class="keyword">echo</span> Menu::widget([</div><div class="line">    <span class="string">'activateItems'</span> =&gt; <span class="keyword">false</span>,</div><div class="line">    <span class="string">'items'</span> =&gt; [</div><div class="line">        [<span class="string">'label'</span> =&gt; <span class="string">'Home'</span>, <span class="string">'url'</span> =&gt; [<span class="string">'site/index'</span>]],</div><div class="line">        [<span class="string">'label'</span> =&gt; <span class="string">'Products'</span>, <span class="string">'url'</span> =&gt; [<span class="string">'product/index'</span>]],</div><div class="line">        [<span class="string">'label'</span> =&gt; <span class="string">'Login'</span>, <span class="string">'url'</span> =&gt; [<span class="string">'site/login'</span>], <span class="string">'visible'</span> =&gt; Yii::$app-&gt;user-&gt;isGuest],</div><div class="line">    ],</div><div class="line">]);</div></pre></td></tr></table></figure></p>
<p>上述代码创建了一个小部件 Menu 并将其 activateItems 属性初始化为 false。item 属性也配置成了将要显示的菜单条目。</p>
<p>请注意，代码中已经给出了类名 <em>yii\widgets\Menu</em>，配置数组<strong>不应该</strong>再包含 class` 键。</p>
<h4 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h4><p>当配置的内容十分复杂，通用做法是将其存储在一或多个 PHP 文件中，这些文件被称为配置文件。一个配置文件返回的是 PHP 数组。例如，像这样把应用配置信息存储在名为 web.php 的文件中：<br><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">return</span> [</div><div class="line">    <span class="string">'id'</span> =&gt; <span class="string">'basic'</span>,</div><div class="line">    <span class="string">'basePath'</span> =&gt; dirname(<span class="keyword">__DIR__</span>),</div><div class="line">    <span class="string">'extensions'</span> =&gt; <span class="keyword">require</span>(<span class="keyword">__DIR__</span> . <span class="string">'/../vendor/yiisoft/extensions.php'</span>),</div><div class="line">    <span class="string">'components'</span> =&gt; <span class="keyword">require</span>(<span class="keyword">__DIR__</span> . <span class="string">'/components.php'</span>),</div><div class="line">];</div></pre></td></tr></table></figure></p>
<p>鉴于 components 配置也很复杂，上述代码把它们存储在单独的 components.php 文件中，并且包含在 web.php 里。components.php 的内容如下：<br><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">return</span> [</div><div class="line">    <span class="string">'cache'</span> =&gt; [</div><div class="line">        <span class="string">'class'</span> =&gt; <span class="string">'yii\caching\FileCache'</span>,</div><div class="line">    ],</div><div class="line">    <span class="string">'mailer'</span> =&gt; [</div><div class="line">        <span class="string">'class'</span> =&gt; <span class="string">'yii\swiftmailer\Mailer'</span>,</div><div class="line">    ],</div><div class="line">    <span class="string">'log'</span> =&gt; [</div><div class="line">        <span class="string">'class'</span> =&gt; <span class="string">'yii\log\Dispatcher'</span>,</div><div class="line">        <span class="string">'traceLevel'</span> =&gt; YII_DEBUG ? <span class="number">3</span> : <span class="number">0</span>,</div><div class="line">        <span class="string">'targets'</span> =&gt; [</div><div class="line">            [</div><div class="line">                <span class="string">'class'</span> =&gt; <span class="string">'yii\log\FileTarget'</span>,</div><div class="line">            ],</div><div class="line">        ],</div><div class="line">    ],</div><div class="line">    <span class="string">'db'</span> =&gt; [</div><div class="line">        <span class="string">'class'</span> =&gt; <span class="string">'yii\db\Connection'</span>,</div><div class="line">        <span class="string">'dsn'</span> =&gt; <span class="string">'mysql:host=localhost;dbname=stay2'</span>,</div><div class="line">        <span class="string">'username'</span> =&gt; <span class="string">'root'</span>,</div><div class="line">        <span class="string">'password'</span> =&gt; <span class="string">''</span>,</div><div class="line">        <span class="string">'charset'</span> =&gt; <span class="string">'utf8'</span>,</div><div class="line">    ],</div><div class="line">];</div></pre></td></tr></table></figure></p>
<p>仅仅需要 “require”，就可以取得一个配置文件的配置内容，像这样：<br><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$config = <span class="keyword">require</span>(<span class="string">'path/to/web.php'</span>);</div><div class="line">(<span class="keyword">new</span> yii\web\Application($config))-&gt;run();</div></pre></td></tr></table></figure></p>
<h4 id="默认配置"><a href="#默认配置" class="headerlink" title="默认配置"></a>默认配置</h4><p><em><strong>Yii::createObject()</strong></em> 方法基于依赖注入容器实现。使用 <em><strong>Yii::creatObject()</strong></em> 创建对象时，可以附加一系列默认配置到指定类的任何实例。默认配置还可以在入口脚本中调用 <em><strong>Yii::$container-&gt;set()</strong></em> 来定义。</p>
<p>例如，如果你想自定义 <em><strong>yii\widgets\LinkPager</strong></em> 小部件，以便让分页器最多只显示 5 个翻页按钮（默认是 10 个），你可以用下述代码实现：<br><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">\Yii::$container-&gt;set(<span class="string">'yii\widgets\LinkPager'</span>, [</div><div class="line">    <span class="string">'maxButtonCount'</span> =&gt; <span class="number">5</span>,</div><div class="line">]);</div></pre></td></tr></table></figure></p>
<p>不使用默认配置的话，你就得在任何使用分页器的地方，都配置 maxButtonCount 的值。</p>
<p>环境常量</p>
<p>配置经常要随着应用运行的不同环境更改。例如在开发环境中，你可能使用名为 mydb_dev 的数据库，而生产环境则使用 mydb_prod 数据库。为了便于切换使用环境，Yii 提供了一个定义在入口脚本中的 <strong>YII_ENV</strong> 常量。如下：<br><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">defined(<span class="string">'YII_ENV'</span>) <span class="keyword">or</span> define(<span class="string">'YII_ENV'</span>, <span class="string">'dev'</span>);</div></pre></td></tr></table></figure></p>
<p>你可以把 YII_ENV 定义成以下任何一种值：</p>
<blockquote>
<ul>
<li>prod：生产环境。常量 YII_ENV_PROD 将被看作 true。如果你没修改过，这就是 YII_ENV 的默认值。</li>
<li>dev：开发环境。常量 YII_ENV_DEV 将被看作 true。</li>
<li>test：测试环境。常量 YII_ENV_TEST 将被看作 true。<br>有了这些环境常量，你就可以根据当下应用运行环境的不同，进行差异化配置。例如，应用可以包含下述代码只在开发环境中开启调试工具。</li>
</ul>
</blockquote>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">$config = [...];</div><div class="line"></div><div class="line"><span class="keyword">if</span> (YII_ENV_DEV) &#123;</div><div class="line">    <span class="comment">// 根据 `dev` 环境进行的配置调整</span></div><div class="line">    $config[<span class="string">'bootstrap'</span>][] = <span class="string">'debug'</span>;</div><div class="line">    $config[<span class="string">'modules'</span>][<span class="string">'debug'</span>] = <span class="string">'yii\debug\Module'</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">return</span> $config;</div></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/yii框架/">yii框架</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-yii框架入口脚本" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/08/31/yii框架入口脚本/" class="article-date">
  	<time datetime="2016-08-31T01:09:00.000Z" itemprop="datePublished">2016-08-31</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/08/31/yii框架入口脚本/">入口脚本</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="入口脚本"><a href="#入口脚本" class="headerlink" title="入口脚本"></a>入口脚本</h2><p>入口脚本是应用启动流程中的第一环， 一个应用（不管是网页应用还是控制台应用）只有一个入口脚本。 终端用户的请求通过入口脚本实例化应用并将将请求转发到应用。</p>
<p>Web 应用的入口脚本必须放在终端用户能够访问的目录下， 通常命名为 <em>index.php</em>， 也可以使用 Web 服务器能定位到的其他名称。</p>
<p>控制台应用的入口脚本一般在应用根目录下命名为 yii（后缀为.php）， 该文件需要有执行权限， 这样用户就能通过命令 <em>./yii <route> [arguments] [options]</route></em> 来运行控制台应用。</p>
<p>入口脚本主要完成以下工作：</p>
<blockquote>
<ul>
<li>定义全局常量；</li>
<li>注册 Composer 自动加载器；</li>
<li>包含 Yii 类文件；</li>
<li>加载应用配置；</li>
<li>创建一个应用实例并配置;</li>
<li>调用 yii\base\Application::run() 来处理请求。</li>
</ul>
</blockquote>
<h4 id="Web-应用"><a href="#Web-应用" class="headerlink" title="Web 应用"></a>Web 应用</h4><p>以下是基础应用模版入口脚本的代码：<br><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line"></div><div class="line">defined(<span class="string">'YII_DEBUG'</span>) <span class="keyword">or</span> define(<span class="string">'YII_DEBUG'</span>, <span class="keyword">true</span>);</div><div class="line">defined(<span class="string">'YII_ENV'</span>) <span class="keyword">or</span> define(<span class="string">'YII_ENV'</span>, <span class="string">'dev'</span>);</div><div class="line"></div><div class="line"><span class="comment">// 注册 Composer 自动加载器</span></div><div class="line"><span class="keyword">require</span>(<span class="keyword">__DIR__</span> . <span class="string">'/../vendor/autoload.php'</span>);</div><div class="line"></div><div class="line"><span class="comment">// 包含 Yii 类文件</span></div><div class="line"><span class="keyword">require</span>(<span class="keyword">__DIR__</span> . <span class="string">'/../vendor/yiisoft/yii2/Yii.php'</span>);</div><div class="line"></div><div class="line"><span class="comment">// 加载应用配置</span></div><div class="line">$config = <span class="keyword">require</span>(<span class="keyword">__DIR__</span> . <span class="string">'/../config/web.php'</span>);</div><div class="line"></div><div class="line"><span class="comment">// 创建、配置、运行一个应用</span></div><div class="line">(<span class="keyword">new</span> yii\web\Application($config))-&gt;run();</div></pre></td></tr></table></figure></p>
<h4 id="控制台应用"><a href="#控制台应用" class="headerlink" title="控制台应用"></a>控制台应用</h4><p>以下是一个控制台应用的入口脚本：<br><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/env php</span></div><div class="line"><span class="meta">&lt;?php</span></div><div class="line"><span class="comment">/**</span></div><div class="line"> * Yii console bootstrap file.</div><div class="line"> *</div><div class="line"> * <span class="doctag">@link</span> http://www.yiiframework.com/</div><div class="line"> * <span class="doctag">@copyright</span> Copyright (c) 2008 Yii Software LLC</div><div class="line"> * <span class="doctag">@license</span> http://www.yiiframework.com/license/</div><div class="line"> */</div><div class="line"></div><div class="line">defined(<span class="string">'YII_DEBUG'</span>) <span class="keyword">or</span> define(<span class="string">'YII_DEBUG'</span>, <span class="keyword">true</span>);</div><div class="line"></div><div class="line"><span class="comment">// 注册 Composer 自动加载器</span></div><div class="line"><span class="keyword">require</span>(<span class="keyword">__DIR__</span> . <span class="string">'/vendor/autoload.php'</span>);</div><div class="line"></div><div class="line"><span class="comment">// 包含 Yii 类文件</span></div><div class="line"><span class="keyword">require</span>(<span class="keyword">__DIR__</span> . <span class="string">'/vendor/yiisoft/yii2/Yii.php'</span>);</div><div class="line"></div><div class="line"><span class="comment">// 加载应用配置</span></div><div class="line">$config = <span class="keyword">require</span>(<span class="keyword">__DIR__</span> . <span class="string">'/config/console.php'</span>);</div><div class="line"></div><div class="line">$application = <span class="keyword">new</span> yii\console\Application($config);</div><div class="line">$exitCode = $application-&gt;run();</div><div class="line"><span class="keyword">exit</span>($exitCode);</div></pre></td></tr></table></figure></p>
<h4 id="定义常量"><a href="#定义常量" class="headerlink" title="定义常量"></a>定义常量</h4><p>入口脚本是定义全局常量的最好地方，Yii 支持以下三个常量：</p>
<blockquote>
<ul>
<li>YII_DEBUG：标识应用是否运行在调试模式。当在调试模式下， 应用会保留更多日志信息，如果抛出异常，会显示详细的错误调用堆栈。 因此，调试模式主要适合在开发阶段使用，YII_DEBUG 默认值为 false。</li>
<li>YII_ENV：标识应用运行的环境， 详情请查阅配置章节。<em> YII_ENV 默认值为 ‘prod’，表示应用运行在线上产品环境.</em>你可以把 YII_ENV 定义成以下任何一种值：<blockquote>
<ul>
<li>prod：生产环境。常量 YII_ENV_PROD 将被看作 true。如果你没修改过，这就是 YII_ENV 的默认值。</li>
<li>dev：开发环境。常量 YII_ENV_DEV 将被看作 true。</li>
<li>test：测试环境。常量 YII_ENV_TEST 将被看作 true。</li>
</ul>
</blockquote>
</li>
<li>YII_ENABLE_ERROR_HANDLER：标识是否启用 Yii 提供的错误处理， 默认为 true。<br>当定义一个常量时，通常使用类似如下代码来定义：<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">defined(<span class="string">'YII_DEBUG'</span>) <span class="keyword">or</span> define(<span class="string">'YII_DEBUG'</span>, <span class="keyword">true</span>);</div></pre></td></tr></table></figure>
</li>
</ul>
</blockquote>
<p>上面的代码等同于:<br><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (!defined(<span class="string">'YII_DEBUG'</span>)) &#123;</div><div class="line">    define(<span class="string">'YII_DEBUG'</span>, <span class="keyword">true</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>显然第一段代码更加简洁易懂。</p>
<p>常量定义应该在入口脚本的开头，这样包含其他 PHP 文件时， 常量就能生效。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/yii框架/">yii框架</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-mapkit与CoreLocation 入门： 在地图上显示当前位置以及标注与运动路径" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/07/14/mapkit与CoreLocation 入门： 在地图上显示当前位置以及标注与运动路径/" class="article-date">
  	<time datetime="2016-07-14T02:46:59.000Z" itemprop="datePublished">2016-07-14</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/07/14/mapkit与CoreLocation 入门： 在地图上显示当前位置以及标注与运动路径/">mapkit与CoreLocation 入门： 在地图上显示当前位置以及标注与运动路径（未添加数据缓存）</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h4><blockquote>
<p>1.import CoreLocation<br>2.import mapkit<br>3.符合协议CLLocationManagerDelegate,MKMapViewDelegate<br>4.添加属性<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">@IBOutlet weak var mapView: MKMapView!</div><div class="line">private let locationManger = CLLocationManager.init()</div><div class="line">private var preLocationPoint: CLLocation!</div><div class="line">private var totalMovementDistance: CLLocationDistance = 0</div><div class="line">private var userCoordinates: [CLLocationCoordinate2D] = []</div><div class="line">&gt;</div></pre></td></tr></table></figure></p>
<p>5.在 viewDidLoad(){} 方法中添加 代理为本身<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">locationManger.delegate = self</div><div class="line">mapView.delegate = self</div><div class="line">&gt;</div></pre></td></tr></table></figure></p>
<p>6.设置位置管理器的定位精度  locationManger.desiredAccuracy = kCLLocationAccuracyBest</p>
<ol>
<li>请求访问权限 定制IOSIO目标权限：点击项目名称，选择TARGET下的目录名称，选择INFO，custom IOS Target Projecties。添加KEY Privacy - Location When In Use Usage Description</li>
<li>完成CoreLocationDelegate方法</li>
<li>完成MKMapViewDelegate方法 mapView添加组件之后调用代理方法</li>
</ol>
</blockquote>
<h5 id="viewController"><a href="#viewController" class="headerlink" title="viewController"></a>viewController</h5><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> UIKit</div><div class="line"><span class="keyword">import</span> CoreLocation</div><div class="line"><span class="keyword">import</span> MapKit</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ViewController</span>: <span class="title">UIViewController</span>,<span class="title">CLLocationManagerDelegate</span>,<span class="title">MKMapViewDelegate</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="meta">@IBOutlet</span> <span class="keyword">weak</span> <span class="keyword">var</span> mapView: <span class="type">MKMapView</span>!</div><div class="line">    <span class="keyword">private</span> <span class="keyword">let</span> locationManger = <span class="type">CLLocationManager</span>.<span class="keyword">init</span>()</div><div class="line">    <span class="keyword">private</span> <span class="keyword">var</span> preLocationPoint: <span class="type">CLLocation</span>!</div><div class="line">    <span class="keyword">private</span> <span class="keyword">var</span> totalMovementDistance: <span class="type">CLLocationDistance</span> = <span class="number">0</span></div><div class="line">    <span class="keyword">private</span> <span class="keyword">var</span> userCoordinates: [<span class="type">CLLocationCoordinate2D</span>] = []</div><div class="line"></div><div class="line"></div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="keyword">super</span>.viewDidLoad()</div><div class="line">        <span class="comment">// Do any additional setup after loading the view, typically from a nib.</span></div><div class="line"></div><div class="line">        <span class="comment">//坑：必须写</span></div><div class="line">        locationManger.delegate = <span class="keyword">self</span></div><div class="line">        mapView.delegate = <span class="keyword">self</span></div><div class="line">        locationManger.desiredAccuracy = kCLLocationAccuracyBest</div><div class="line"></div><div class="line">        locationManger.requestWhenInUseAuthorization()</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">didReceiveMemoryWarning</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="keyword">super</span>.didReceiveMemoryWarning()</div><div class="line">        <span class="comment">// Dispose of any resources that can be recreated.</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">locationManager</span><span class="params">(<span class="number">_</span> manager: CLLocationManager, didChangeAuthorization status: CLAuthorizationStatus)</span></span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"<span class="subst">\(status.rawValue)</span>"</span>)</div><div class="line">        <span class="keyword">switch</span> status &#123;</div><div class="line">        <span class="keyword">case</span> .authorizedWhenInUse,.authorizedAlways:</div><div class="line">            locationManger.startUpdatingLocation()</div><div class="line">            mapView.showsUserLocation = <span class="literal">true</span></div><div class="line">            mapView.userTrackingMode = .follow</div><div class="line">        <span class="keyword">default</span>:</div><div class="line">            locationManger.stopUpdatingLocation()</div><div class="line">            mapView.showsUserLocation = <span class="literal">false</span></div><div class="line"></div><div class="line">        &#125;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">locationManager</span><span class="params">(<span class="number">_</span> manager: CLLocationManager, didFailWithError error: NSError)</span></span> &#123;</div><div class="line">        <span class="keyword">let</span> errorType = error.code == <span class="type">CLError</span>.denied.rawValue ? <span class="string">"Access Denied"</span> : <span class="string">"Error <span class="subst">\(error.code)</span>"</span></div><div class="line">        <span class="keyword">let</span> alertController = <span class="type">UIAlertController</span>(title: <span class="string">"LocationManager Error"</span>, message: errorType, preferredStyle: .alert)</div><div class="line">        <span class="keyword">let</span> okAction = <span class="type">UIAlertAction</span>(title: <span class="string">"OK"</span>, style: .cancel, handler: <span class="literal">nil</span>)</div><div class="line">        alertController.addAction(okAction)</div><div class="line">        present(alertController, animated: <span class="literal">true</span>, completion: <span class="literal">nil</span>)</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">locationManager</span><span class="params">(<span class="number">_</span> manager: CLLocationManager, didUpdateLocations locations: [CLLocation])</span></span> &#123;</div><div class="line">        <span class="keyword">let</span> region: <span class="type">MKCoordinateRegion</span>!</div><div class="line">        <span class="keyword">let</span> newLocation = locations.last</div><div class="line"></div><div class="line">        <span class="comment">//坑待填：转义字符</span></div><div class="line">        <span class="number">_</span> = <span class="type">String</span>(format: <span class="string">"%g\u&#123;00B0&#125;"</span>,(newLocation?.coordinate.latitude)!)</div><div class="line"></div><div class="line">        <span class="keyword">if</span> newLocation == <span class="literal">nil</span>||newLocation?.horizontalAccuracy &lt; <span class="number">0</span> || newLocation?.horizontalAccuracy &gt; <span class="number">100</span> || newLocation?.verticalAccuracy &gt; <span class="number">50</span>&#123;</div><div class="line">            <span class="keyword">return</span></div><div class="line">        &#125;</div><div class="line"></div><div class="line">         <span class="built_in">print</span>(<span class="string">"mapView=  "</span>+<span class="string">"<span class="subst">\(mapView.userLocation.coordinate)</span>"</span>)</div><div class="line">        <span class="keyword">if</span> preLocationPoint == <span class="literal">nil</span> &amp;&amp; (mapView.userLocation.coordinate.latitude == <span class="number">0.0</span> || mapView.userLocation.coordinate.longitude == <span class="number">0.0</span> )&#123;</div><div class="line">            totalMovementDistance = <span class="number">0</span></div><div class="line">            region = <span class="type">MKCoordinateRegion</span>(center: (newLocation?.coordinate)!, span: <span class="type">MKCoordinateSpan</span>(latitudeDelta: <span class="number">0.3</span>, longitudeDelta: <span class="number">0.3</span>))</div><div class="line">            mapView.setRegion(region, animated: <span class="literal">true</span>)</div><div class="line">        &#125;<span class="keyword">else</span> &#123;</div><div class="line">          <span class="comment">//添加标示</span></div><div class="line">            <span class="keyword">if</span> preLocationPoint == <span class="literal">nil</span> &#123;</div><div class="line">              <span class="comment">//坑待填：只读属性</span></div><div class="line">                <span class="keyword">let</span> start = <span class="type">Place</span>.<span class="keyword">init</span>(title: <span class="string">"start"</span>, subtitle: <span class="string">"new start"</span>, coordinate: (mapView.userLocation.coordinate))</div><div class="line">                mapView.deselectAnnotation(start, animated: <span class="literal">true</span>)</div><div class="line">                mapView.addAnnotation(start)</div><div class="line"></div><div class="line">                preLocationPoint = newLocation</div><div class="line">            &#125;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">            <span class="comment">//设置显示范围，以当前点坐标为圆心</span></div><div class="line">            region = <span class="type">MKCoordinateRegion</span>(center: mapView.userLocation.coordinate, span: <span class="type">MKCoordinateSpan</span>(latitudeDelta: <span class="number">0.01</span>, longitudeDelta: <span class="number">0.01</span>))</div><div class="line">            mapView.setRegion(region, animated: <span class="literal">true</span>)</div><div class="line">            totalMovementDistance += (newLocation?.<span class="built_in">distance</span>(from: preLocationPoint))!</div><div class="line"></div><div class="line">            <span class="keyword">var</span> currentCoordinate = (newLocation?.coordinate)!</div><div class="line">            userCoordinates.append(mapView.userLocation.coordinate)</div><div class="line"></div><div class="line">            <span class="keyword">let</span> userMovementLine = <span class="type">MKPolyline</span>(coordinates:&amp;(userCoordinates), <span class="built_in">count</span>: userCoordinates.<span class="built_in">count</span>)</div><div class="line"></div><div class="line">            mapView.add(userMovementLine)</div><div class="line">            <span class="built_in">print</span>(userMovementLine.pointCount)</div><div class="line">            mapView.showsBuildings = <span class="literal">true</span></div><div class="line"></div><div class="line">        &#125;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">func</span>  <span class="title">mapViewWillStartRenderingMap</span><span class="params">(<span class="number">_</span> mapView: MKMapView)</span></span> &#123;</div><div class="line"><span class="comment">//        print("Z ZZZZZZZZZZZZ")</span></div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">mapView</span><span class="params">(<span class="number">_</span> mapView: MKMapView, rendererFor overlay: MKOverlay)</span></span> -&gt; <span class="type">MKOverlayRenderer</span> &#123;</div><div class="line">        <span class="keyword">var</span> aRender: <span class="type">MKOverlayRenderer</span>! = <span class="literal">nil</span></div><div class="line">        <span class="keyword">if</span> overlay <span class="keyword">is</span>  <span class="type">MKPolyline</span>&#123;</div><div class="line">            aRender = <span class="type">MKPolylineRenderer</span>(overlay: overlay)</div><div class="line"></div><div class="line">            (aRender <span class="keyword">as</span>! <span class="type">MKPolylineRenderer</span>).strokeColor = <span class="type">UIColor</span>(colorLiteralRed: <span class="number">0</span>, green: <span class="number">0.0</span>, blue: <span class="number">1.0</span>, alpha: <span class="number">0.7</span>)</div><div class="line">            (aRender <span class="keyword">as</span>! <span class="type">MKPolylineRenderer</span>).lineWidth = <span class="number">5</span></div><div class="line"></div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> aRender</div><div class="line"></div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">mapViewDidFinishRenderingMap</span><span class="params">(<span class="number">_</span> mapView: MKMapView, fullyRendered: Bool)</span></span> &#123;</div><div class="line"><span class="comment">//        print("finish")</span></div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<h5 id="place-MKAnnotation"><a href="#place-MKAnnotation" class="headerlink" title="place (MKAnnotation)"></a>place (MKAnnotation)</h5><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> UIKit</div><div class="line"><span class="keyword">import</span> MapKit</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Place</span>: <span class="title">NSObject</span>,<span class="title">MKAnnotation</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> _title: <span class="type">String</span>?</div><div class="line">    <span class="keyword">var</span> _coordinate: <span class="type">CLLocationCoordinate2D</span></div><div class="line">    <span class="keyword">var</span> _subtitle: <span class="type">String</span>?</div><div class="line"></div><div class="line">    <span class="comment">//MKAnnotation 的三个只读属性</span></div><div class="line">    <span class="keyword">var</span> title: <span class="type">String</span>? &#123; <span class="keyword">return</span> _title&#125;</div><div class="line">    <span class="keyword">var</span> coordinate: <span class="type">CLLocationCoordinate2D</span> &#123;<span class="keyword">return</span> _coordinate &#125;</div><div class="line">    <span class="keyword">var</span> subtitle: <span class="type">String</span>? &#123; <span class="keyword">return</span> _subtitle&#125;</div><div class="line"></div><div class="line">    <span class="keyword">init</span>(title: <span class="type">String</span>,subtitle: <span class="type">String</span>,coordinate: <span class="type">CLLocationCoordinate2D</span> )&#123;</div><div class="line">        _title = title</div><div class="line">        _coordinate = coordinate</div><div class="line">        _subtitle = subtitle</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Swift-mapkit/">Swift mapkit</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-实用方法" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/07/09/实用方法/" class="article-date">
  	<time datetime="2016-07-08T23:45:25.000Z" itemprop="datePublished">2016-07-09</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/07/09/实用方法/">实用方法</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="触摸背景关闭键盘"><a href="#触摸背景关闭键盘" class="headerlink" title="触摸背景关闭键盘"></a>触摸背景关闭键盘</h4><p>使用Interface Builder 更改容器视图(view)的所属类，从UIView改为UIControl。容器视图指向storyboard中的一个UIView实例。<br><br>将 容器视图的 TouchDown 事件关联到下面的方法。<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">@<span class="type">IBACtion</span> <span class="function"><span class="keyword">func</span> <span class="title">backGroundTap</span><span class="params">(sender: UIControl)</span></span>&#123;</div><div class="line">  nameFiled.resignFristResponder()</div><div class="line">  <span class="type">NumberFiled</span>.resignFristResponder()</div><div class="line">  <span class="comment">//所有在容器视图上的组件放弃第一响应者</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h4 id="四舍五入lroundf"><a href="#四舍五入lroundf" class="headerlink" title="四舍五入lroundf()"></a>四舍五入lroundf()</h4><h4 id="实现操作表单和警告视图"><a href="#实现操作表单和警告视图" class="headerlink" title="实现操作表单和警告视图"></a>实现操作表单和警告视图</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">@<span class="type">IBACtion</span> <span class="function"><span class="keyword">func</span> <span class="title">buttonPress</span><span class="params">(sender: UIButton)</span></span>&#123;</div><div class="line">  <span class="keyword">let</span> controller = <span class="type">UIAlertController</span>(title: <span class="string">"zzzzz"</span>,message: <span class="literal">nil</span>,preferredStyle: .<span class="type">ActionSheet</span>)</div><div class="line">  <span class="keyword">let</span> yesAction = <span class="type">UIAlertAction</span>(title: <span class="string">"zzzzz"</span>,style: .<span class="type">Destructive</span>,handler:&#123; action <span class="keyword">in</span></div><div class="line">    <span class="keyword">let</span> msg = <span class="keyword">self</span>.nameField.text.isEmpty ? <span class="string">"zzzz"</span> : <span class="string">"zzzzz"</span></div><div class="line">    <span class="keyword">let</span> controller2 = <span class="type">UIAlertController</span>(title: <span class="string">"Cancel"</span>,message: msg,preferredStyle: .<span class="type">Alert</span>)</div><div class="line">    <span class="keyword">let</span> cancel  = <span class="type">UIAlertAction</span>(title: <span class="string">"zzzzz"</span>,style: .<span class="type">Cancel</span>,handler:<span class="literal">nil</span>)</div><div class="line">    controller2.addAction(cancel)</div><div class="line">    <span class="keyword">self</span>.presentViewController(controller2,animated: <span class="literal">true</span>,complection: <span class="literal">nil</span>)</div><div class="line">  &#125;)</div><div class="line">  <span class="keyword">let</span> no = <span class="type">UIAlertAction</span>(title: <span class="string">"no"</span>,style: .<span class="type">Cancel</span>,handler:<span class="literal">nil</span>)</div><div class="line">  controller.addAction(yesAction)</div><div class="line">  controller.addAction(no)</div><div class="line">  <span class="comment">//为了让警告视图或者操作表单显示出来需要让当前视图控制器来展示警告视图</span></div><div class="line">  <span class="comment">//  获取警告控制器的悬浮展示控制器</span></div><div class="line">  <span class="keyword">if</span> <span class="keyword">let</span> ppc = controller.popoverPresentationController&#123;</div><div class="line">    ppc.sourceView = sender</div><div class="line">    ppc.sourceRect = sender.bounds</div><div class="line">    <span class="comment">//设置警告视图悬浮框在源按钮的方向</span></div><div class="line">    ppc.permittedArrowDirections = .<span class="type">Down</span></div><div class="line">  &#125;</div><div class="line">  <span class="keyword">self</span>.presentViewController(controller,animated: <span class="literal">true</span>,complection: <span class="literal">nil</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="从根视图所属的Storyboard-上加载视图控制器"><a href="#从根视图所属的Storyboard-上加载视图控制器" class="headerlink" title="从根视图所属的Storyboard 上加载视图控制器"></a>从根视图所属的Storyboard 上加载视图控制器</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> viewController = storyboard?.instantiateViewControllerWithIdentifier(<span class="string">"identifier"</span>) <span class="keyword">as</span> <span class="type">UIViewController</span></div></pre></td></tr></table></figure>
<h4 id="切换视图控制器方法"><a href="#切换视图控制器方法" class="headerlink" title="切换视图控制器方法"></a>切换视图控制器方法</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">switchViewController(from fromVC: <span class="type">UIViewController</span> ,to toVC: <span class="type">UIViewController</span>)&#123;</div><div class="line">  <span class="keyword">if</span> fromVC != <span class="literal">nil</span>&#123;</div><div class="line">    fromVC!.willMovetoParentViewController(<span class="literal">nil</span>)</div><div class="line">    fromVC!.view.removeFromSuperview()</div><div class="line">    fromVC!.removeFromParentViewController()</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">if</span> toVC != <span class="literal">nil</span>&#123;</div><div class="line">    <span class="keyword">self</span>.addChildViewController(toVC!)</div><div class="line">    <span class="keyword">self</span>.view.insertSubview(toVC!.view,atIndex: <span class="number">0</span>)</div><div class="line">    toVC!.didMovetoParentViewController(<span class="keyword">self</span>)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="转场过程的动画效果"><a href="#转场过程的动画效果" class="headerlink" title="转场过程的动画效果"></a>转场过程的动画效果</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">@<span class="type">IBACtion</span> <span class="function"><span class="keyword">func</span> <span class="title">buttonPressed</span><span class="params">(sender: UIBarButtonItem)</span></span>&#123;</div><div class="line"></div><div class="line">    <span class="comment">//设置动画步骤如下</span></div><div class="line">    <span class="type">UIView</span>.beginAnimations(<span class="string">"View Flip"</span>,context: <span class="literal">nil</span>)</div><div class="line">    <span class="type">UIView</span>.setAnimationDuration(<span class="number">0.4</span>)</div><div class="line">    <span class="type">UIView</span>.setAnimationCurve(.<span class="type">EaseInOut</span>)</div><div class="line">    <span class="type">UIView</span>.setAnimationTransition(.<span class="type">FlipFromRight</span>,forView: view,cache: <span class="literal">true</span>)</div><div class="line">    <span class="type">UIView</span>.commitAnimations()</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="选取器-UIPickerViewSource-数据源方法"><a href="#选取器-UIPickerViewSource-数据源方法" class="headerlink" title="选取器 UIPickerViewSource 数据源方法"></a>选取器 UIPickerViewSource 数据源方法</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//选取器视图的有几个滚轮组件</span></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">numberOfComponentsInPickerView</span><span class="params">(<span class="number">_</span> pickerView: UIPickerView)</span></span> -&gt; <span class="type">Int</span></div></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//选取器视图numberOfRowsInComponent滚轮组件有几行数据</span></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">pickerView</span><span class="params">(<span class="number">_</span> pickerView: UIPickerView,numberOfRowsInComponent component: Int)</span></span> -&gt; <span class="type">Int</span></div></pre></td></tr></table></figure>
<h4 id="选取器-UIPickerViewDelegate-委托方法"><a href="#选取器-UIPickerViewDelegate-委托方法" class="headerlink" title="选取器 UIPickerViewDelegate 委托方法"></a>选取器 UIPickerViewDelegate 委托方法</h4><p>Setting the Dimensions of the Picker View<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">optional</span> <span class="function"><span class="keyword">func</span> <span class="title">pickerView</span><span class="params">(<span class="number">_</span> pickerView: UIPickerView,</span></span></div><div class="line"> rowHeightForComponent component: Int) -&gt; <span class="type">CGFloat</span></div><div class="line"></div><div class="line"> <span class="keyword">optional</span> <span class="function"><span class="keyword">func</span> <span class="title">pickerView</span><span class="params">(<span class="number">_</span> pickerView: UIPickerView,</span></span></div><div class="line">     widthForComponent component: Int) -&gt; <span class="type">CGFloat</span></div></pre></td></tr></table></figure></p>
<p>Setting the Content of Component Rows<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//选取器视图forComponent组件的titleForRow行数据的标题</span></div><div class="line">  <span class="keyword">optional</span> <span class="function"><span class="keyword">func</span> <span class="title">pickerView</span><span class="params">(<span class="number">_</span> pickerView: UIPickerView,</span></span></div><div class="line">             titleForRow row: Int,</div><div class="line">            forComponent component: Int) -&gt; <span class="type">String</span>?</div><div class="line"></div><div class="line">  <span class="keyword">optional</span> <span class="function"><span class="keyword">func</span> <span class="title">pickerView</span><span class="params">(<span class="number">_</span> pickerView: UIPickerView,</span></span></div><div class="line">   attributedTitleForRow row: Int,</div><div class="line">            forComponent component: Int) -&gt; <span class="type">NSAttributedString</span>?</div><div class="line"></div><div class="line">  <span class="keyword">optional</span> <span class="function"><span class="keyword">func</span> <span class="title">pickerView</span><span class="params">(<span class="number">_</span> pickerView: UIPickerView,</span></span></div><div class="line">                        viewForRow row: Int,</div><div class="line">                      forComponent component: Int,</div><div class="line">                       reusingView view: UIView?) -&gt; <span class="type">UIView</span></div></pre></td></tr></table></figure></p>
<p>Responding to Row Selection<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//选取器视图的选择发生改变时调用，一般用于依赖性的多滚轮结构</span></div><div class="line">  <span class="keyword">optional</span> <span class="function"><span class="keyword">func</span> <span class="title">pickerView</span><span class="params">(<span class="number">_</span> pickerView: UIPickerView,</span></span></div><div class="line">            didSelectRow row: Int,</div><div class="line">             inComponent component: Int)</div></pre></td></tr></table></figure></p>
<h4 id="从包-bundle-中读取数据"><a href="#从包-bundle-中读取数据" class="headerlink" title="从包(bundle)中读取数据"></a>从包(bundle)中读取数据</h4><p>从属性列表(.plist)中读取数据<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> bundle = <span class="type">NSBundle</span>.mainBundle()</div><div class="line"><span class="keyword">let</span> plistURL = bundle.<span class="type">URLForResource</span>(<span class="string">"statedictionary"</span>, withExtension: <span class="string">"plist"</span>)</div><div class="line">stateZips = <span class="type">NSDictionary</span>(contentsOfURL: plistURL!) <span class="keyword">as</span>! [<span class="type">String</span> : [<span class="type">String</span>]]</div></pre></td></tr></table></figure></p>
<h4 id="获取ios设备上的所有字体"><a href="#获取ios设备上的所有字体" class="headerlink" title="获取ios设备上的所有字体"></a>获取ios设备上的所有字体</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//必须在该委托方法下调用</span></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">application</span><span class="params">(<span class="number">_</span> application: UIApplication, didFinishLaunchingWithOptions launchOptions: [NSObject: AnyObject]?)</span></span> -&gt; <span class="type">Bool</span> &#123;</div><div class="line">    <span class="comment">// Override point for customization after application launch.</span></div><div class="line">    <span class="comment">//可以在这里重载应用启动后的自定义代码</span></div><div class="line">    <span class="keyword">for</span> family <span class="keyword">in</span> <span class="type">UIFont</span>.familyNames() <span class="keyword">as</span> [<span class="type">String</span>]&#123;</div><div class="line">      <span class="built_in">print</span>(family)</div><div class="line">      <span class="keyword">for</span> font <span class="keyword">in</span> <span class="type">UIFont</span>.fontNamesForFamilyName(family)&#123; </div><div class="line">        <span class="built_in">print</span>(<span class="string">"<span class="subst">\(font)</span>"</span>)</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="literal">true</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="随机数"><a href="#随机数" class="headerlink" title="随机数"></a>随机数</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> selectedComponent <span class="keyword">in</span> <span class="number">0</span>..&lt;componentNumber &#123;</div><div class="line">            <span class="comment">//获取随机数</span></div><div class="line">            <span class="keyword">let</span> newValue = <span class="type">Int</span>(arc4random_uniform(<span class="type">UInt32</span>(images.<span class="built_in">count</span>)))</div><div class="line"><span class="comment">//            if newValue == lastValue &#123;</span></div><div class="line"><span class="comment">//                numberInRow += 1</span></div><div class="line"><span class="comment">//            &#125;else&#123;</span></div><div class="line"><span class="comment">//                numberInRow = 0</span></div><div class="line"><span class="comment">//            &#125;</span></div><div class="line"><span class="comment">//            lastValue = newValue</span></div><div class="line">            valuesInRow.append(newValue)</div><div class="line">            customPickerData.selectRow(newValue, inComponent: selectedComponent, animated: <span class="literal">true</span>)</div><div class="line">            customPickerData.reloadComponent(selec</div></pre></td></tr></table></figure>
<h4 id="播放声音"><a href="#播放声音" class="headerlink" title="播放声音"></a>播放声音</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> <span class="keyword">var</span> winSoundID:<span class="type">SystemSoundID</span> = <span class="number">0</span></div><div class="line"><span class="keyword">private</span> <span class="keyword">var</span> crunchSoundID:<span class="type">SystemSoundID</span> = <span class="number">0</span></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">playWInSound</span><span class="params">()</span></span>&#123;</div><div class="line">    <span class="comment">//有效的声音标识符不会为0 ，如果为零就是还未创建</span></div><div class="line">    <span class="keyword">if</span> winSoundID == <span class="number">0</span> &#123;</div><div class="line">        <span class="keyword">let</span> soundURL = <span class="type">NSBundle</span>.mainBundle().<span class="type">URLForResource</span>(<span class="string">"win"</span>, withExtension: <span class="string">"wav"</span>)! <span class="keyword">as</span> <span class="type">CFURL</span></div><div class="line">        <span class="type">AudioServicesCreateSystemSoundID</span>(soundURL, &amp;winSoundID)<span class="comment">//这步结束之后 winSoundID不会为0</span></div><div class="line">    &#125;</div><div class="line">    <span class="type">AudioServicesPlaySystemSound</span>(winSoundID)</div><div class="line">    winLaber.text = <span class="string">"Winner!!!"</span></div><div class="line"></div><div class="line">    dispatch_after(dispatch_time(<span class="type">DISPATCH_TIME_NOW</span>, <span class="type">Int64</span>(<span class="number">1.5</span>*<span class="type">Double</span>(<span class="type">NSEC_PER_SEC</span>))), dispatch_get_main_queue(), &#123;</div><div class="line">        <span class="keyword">self</span>.buttonShow()</div><div class="line">        &#125;)</div><div class="line">&#125;</div></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Swift/">Swift</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-知识汇总" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/07/08/知识汇总/" class="article-date">
  	<time datetime="2016-07-08T15:45:36.000Z" itemprop="datePublished">2016-07-08</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/07/08/知识汇总/">知识点汇总</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="零散知识点"><a href="#零散知识点" class="headerlink" title="零散知识点"></a>零散知识点</h4><blockquote>
<ol>
<li><strong> .nib(二进制文件）与.xib（基于XML的衍生格式） </strong> 是Interface Builder 支持的不同文件类型<blockquote>
<ol>
<li>每个nib文件可以包含任意数量的对象，但在iOS项目中，每个nib文件通常只包含一个视图以及相关联的控制器或者对象。</li>
<li>Interface Builder还支持：storyBoard.</li>
<li>stroyBoard与nib文件的区别：<blockquote>
<p>1.nib文件一次加载所有内容<br>2.storyBoard不会一次加载所有的内容，需要在加载某视图和控制器的时候向他请求特定的内容。</p>
</blockquote>
</li>
</ol>
</blockquote>
</li>
<li>app图标的像素的大小(.png)：180＊180、120＊120、87＊87、80＊80、58＊58。在屏幕上使用自定义的图标：普通屏幕24*24，Retina屏使用双倍分辨率，iPhone6plus 使用3倍分辨率。</li>
<li>@IBOutlet与 @IBAction</li>
<li>委托： 负责为其他对象处理特定任务的对象，应用程序委托： AppDelegate.m(.h.swift) ,能够在某些预定义的时间点为UIApplication类做一些事情。每个ios应用都有且仅有一个UIApplication类的实例。</li>
<li>控件的<strong>(UIControlState)4种状态</strong>：Normal、HighLighted、Disabled、Selected</li>
<li><strong>UIAlertActionStyle的三种类型</strong>：Destructive、Default、Cancel</li>
<li>点(Point)、像素(pixel)、Retina显示屏：1point = (n＊1piexl)＊(n＊1piexl)。n 为Retina显示屏的店放大倍数，iPhone5S（2），iPhone6S（接近3）</li>
<li>尺寸分类</li>
<li>多视图的常见类型：基于标签栏(tab bar)(UITabBarController)、基于导航拦(UINavigationController)、基于工具栏</li>
<li>选取器视图(picker view):</li>
<li><strong>数据源</strong>是<strong>控制器</strong>的一部分，虽然可以用于保存数据，但真实作用是从模型中检索数据，并传递给视图。</li>
<li><strong>注释</strong>：//MARK:- 、//MARK: Picker Data Source Methods  在编辑器面板顶部的方法和函数弹出菜单中插入一条分隔线与一个文本条目。在方法之前添加／<em>*  … </em>/ 为函数的方法注释，会在快速帮助面板显示。</li>
</ol>
</blockquote>
<h4 id="尺寸分类"><a href="#尺寸分类" class="headerlink" title="尺寸分类"></a>尺寸分类</h4><table>
<thead>
<tr>
<th>宽度</th>
<th style="text-align:center">高度</th>
<th style="text-align:right">设备及其方向</th>
</tr>
</thead>
<tbody>
<tr>
<td>紧凑</td>
<td style="text-align:center">紧凑</td>
<td style="text-align:right">除iPhone6plus之后的之外的所有横屏IPhone</td>
</tr>
<tr>
<td>紧凑</td>
<td style="text-align:center">标准</td>
<td style="text-align:right">所有竖屏的Iphone</td>
</tr>
<tr>
<td>标准</td>
<td style="text-align:center">紧凑</td>
<td style="text-align:right">横屏iPhone6plus</td>
</tr>
<tr>
<td>标准</td>
<td style="text-align:center">标准</td>
<td style="text-align:right">横屏和竖屏的Ipad</td>
</tr>
</tbody>
</table>
<h4 id="输出接口与操作方法"><a href="#输出接口与操作方法" class="headerlink" title="输出接口与操作方法"></a>输出接口与操作方法</h4><h5 id="IBOutlet"><a href="#IBOutlet" class="headerlink" title="@IBOutlet"></a>@IBOutlet</h5><p>控制器类通过输出接口来引用storyBoard或者nib文件中的对象<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@IBOutlet</span> <span class="keyword">var</span> button: <span class="type">UIButtopn</span>!</div></pre></td></tr></table></figure></p>
<h5 id="IBAction"><a href="#IBAction" class="headerlink" title="@IBAction"></a>@IBAction</h5><p>用@IBAction 修饰的方法名为<strong>操作方法</strong>，操作方法告诉Interface Builder这个方法可以背storyboard活着nib文件中的控件触发。<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@IBAction</span> <span class="function"><span class="keyword">func</span> <span class="title">doSomething</span><span class="params">(sender: AnyObject)</span></span>&#123;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h4 id="所有遇到的类"><a href="#所有遇到的类" class="headerlink" title="所有遇到的类"></a>所有遇到的类</h4><blockquote>
<ul>
<li>UIButton</li>
<li>UILabel</li>
<li>UIViewController</li>
<li>UIView</li>
<li>UIControlState 控件状态 .Normal</li>
<li>NSString</li>
<li>NSLayoutConstraint 布局约束</li>
<li>NSAttributedString 字符串属性 对字符串附加格式信息，例如：字体和段落对齐</li>
<li>NSMutableAttributedString</li>
<li>NSFontAttributeName</li>
</ul>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@IBAction</span> <span class="function"><span class="keyword">func</span> <span class="title">buttonPress</span><span class="params">(sender: UIButton)</span></span>&#123;</div><div class="line">  <span class="keyword">let</span> title = sender.titleForState(.<span class="type">Normal</span>)</div><div class="line">  <span class="keyword">let</span> plainText = <span class="string">"<span class="subst">\(title)</span> button Pressed"</span></div><div class="line">  <span class="keyword">let</span> styleText = <span class="type">NSMutableAttributedString</span>(string: plainText)</div><div class="line">  <span class="keyword">let</span> attributes = [<span class="type">NSFontAttributeName</span> : <span class="type">UIFont</span>.boldSystemFontOfSize(statusLabel.font.pointSize)]</div><div class="line">  <span class="keyword">let</span> nameRange = (plainText <span class="keyword">as</span>! <span class="type">NSString</span>).rangOfString(title)</div><div class="line">  styledText.setAttributes(attributes,range: nameRange)</div><div class="line">  statusLabel.attributeText = styledText</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<blockquote>
<ul>
<li>UIResponder</li>
<li>UIApplicationDelegate</li>
</ul>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> UIKit</div><div class="line"></div><div class="line"><span class="meta">@UIApplicationMain</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">AppDelegate</span>: <span class="title">UIResponder</span>, <span class="title">UIApplicationDelegate</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">var</span> window: <span class="type">UIWindow</span>?</div><div class="line"></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">application</span><span class="params">(<span class="number">_</span> application: UIApplication, didFinishLaunchingWithOptions launchOptions: [NSObject: AnyObject]?)</span></span> -&gt; <span class="type">Bool</span> &#123;</div><div class="line">        <span class="comment">// Override point for customization after application launch.</span></div><div class="line">        <span class="comment">//可以在这里重载应用启动后的自定义代码</span></div><div class="line">        <span class="keyword">return</span> <span class="literal">true</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">applicationWillResignActive</span><span class="params">(<span class="number">_</span> application: UIApplication)</span></span> &#123;</div><div class="line">        <span class="comment">// Sent when the application is about to move from active to inactive state. This can occur for certain types of temporary interruptions (such as an incoming phone call or SMS message) or when the user quits the application and it begins the transition to the background state.</span></div><div class="line">        <span class="comment">//应用从活动状态切换到非活动状态会触发这个方法，出现临时中断或者推出应用会触发，程序转为后台运行</span></div><div class="line">        <span class="comment">// Use this method to pause ongoing tasks, disable timers, and throttle down OpenGL ES frame rates. Games should use this method to pause the game.</span></div><div class="line">        <span class="comment">//可以在这个方法中暂停正在运行的任务，禁用定时器，和降低OPenGL ES帧率。如果是游戏应用可以在这个方法里暂停游戏</span></div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">applicationDidEnterBackground</span><span class="params">(<span class="number">_</span> application: UIApplication)</span></span> &#123;</div><div class="line">        <span class="comment">// Use this method to release shared resources, save user data, invalidate timers, and store enough application state information to restore your application to its current state in case it is terminated later.</span></div><div class="line">        <span class="comment">//释放公用资源、保存用户数据、取消定时器、尽量存储应用程序状态信息。</span></div><div class="line">        <span class="comment">// If your application supports background execution, this method is called instead of applicationWillTerminate: when the user quits.</span></div><div class="line"></div><div class="line">        <span class="comment">//如果应用程序支持后台运行则用户退出时调用这个方法而不是applicationWillTerminrate方法</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">applicationWillEnterForeground</span><span class="params">(<span class="number">_</span> application: UIApplication)</span></span> &#123;</div><div class="line">        <span class="comment">// Called as part of the transition from the background to the active state; here you can undo many of the changes made on entering the background.</span></div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">applicationDidBecomeActive</span><span class="params">(<span class="number">_</span> application: UIApplication)</span></span> &#123;</div><div class="line">        <span class="comment">// Restart any tasks that were paused (or not yet started) while the application was inactive. If the application was previously in the background, optionally refresh the user interface.</span></div><div class="line">        <span class="comment">//</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">applicationWillTerminate</span><span class="params">(<span class="number">_</span> application: UIApplication)</span></span> &#123;</div><div class="line">        <span class="comment">// Called when the application is about to terminate. Save data if appropriate. See also applicationDidEnterBackground:.</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<ul>
<li>UIControl</li>
<li>UIAlertController</li>
<li>UIAlertAction</li>
<li>UIPopoverArrowDirection</li>
<li>UIInterfaceOrientationMask 屏幕支持方向标记类</li>
<li>UIViewController</li>
<li>UIViewAnimationTransition 动画转场的类型类</li>
<li>UIImage</li>
<li>NSDate</li>
<li>NSDateFormatter</li>
<li>UIPickerViewDelegate,UIPickerViewSource<br>*</li>
</ul>
</blockquote>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Swift/">Swift</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-用户界面——各种容器及组件的设置方法" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/06/18/用户界面——各种容器及组件的设置方法/" class="article-date">
  	<time datetime="2016-06-17T20:21:34.000Z" itemprop="datePublished">2016-06-18</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/18/用户界面——各种容器及组件的设置方法/">用户界面——各种容器及组件的设置方法</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="关闭键盘"><a href="#关闭键盘" class="headerlink" title="关闭键盘"></a>关闭键盘</h2><h3 id="1-按下键盘上的Done按钮关闭键盘"><a href="#1-按下键盘上的Done按钮关闭键盘" class="headerlink" title="1. 按下键盘上的Done按钮关闭键盘"></a>1. 按下键盘上的Done按钮关闭键盘</h3><blockquote>
<ol>
<li>用户按下键盘上的Done按钮的时，会产生一个<em>Did End On Exit</em> 事件，此时需要让文本框交出控制权，以关闭键盘</li>
<li>将键盘的Did End On Exit 事件关联到下方的方法上</li>
</ol>
<p>Swift:<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">  <span class="meta">@IBAction</span> <span class="function"><span class="keyword">func</span> <span class="title">textFieldDoneEditing</span><span class="params">(sender: UITextField)</span></span>&#123;</div><div class="line">  sender.resignFristResponder()</div><div class="line">  &#125;</div><div class="line">&gt;</div></pre></td></tr></table></figure></p>
<p>Objc<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">  -(IBAction)textFieldEDoneEditing:(id)sender&#123;</div><div class="line">  [sender resignFirstResponder];</div><div class="line">  &#125;</div><div class="line">&gt;</div></pre></td></tr></table></figure></p>
</blockquote>
<h3 id="2-触摸背景关闭键盘"><a href="#2-触摸背景关闭键盘" class="headerlink" title="2. 触摸背景关闭键盘"></a>2. 触摸背景关闭键盘</h3><blockquote>
<ol>
<li>用户触摸背景时，会出发<em>Touch Down</em>事件，此时需要让文本框或者数字框交出控制权，以关闭键盘</li>
<li>将键盘的Did End On Exit 事件关联到下方的方法上</li>
</ol>
<p>Swift:<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">  <span class="meta">@IBAction</span> <span class="function"><span class="keyword">func</span> <span class="title">backgroundTap</span><span class="params">(sender: UITextField)</span></span>&#123;</div><div class="line">    <span class="comment">//  此时的sender 是 UIControl</span></div><div class="line">    nameField.resignFristResponder()</div><div class="line">    numberField.resignFristResponder()</div><div class="line">    &#125;</div><div class="line">&gt;</div></pre></td></tr></table></figure></p>
<p>Objc<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">  -(IBAction)textFieldEDoneEditing:(id)sender&#123;</div><div class="line">  [self.nameField resignFirstResponder];</div><div class="line">  [self.numberField resignFirstResponder];</div><div class="line">  &#125;</div><div class="line">&gt;</div></pre></td></tr></table></figure></p>
</blockquote>
<h2 id="实现操作表单-action-sheet-和警告视图-alert"><a href="#实现操作表单-action-sheet-和警告视图-alert" class="headerlink" title="实现操作表单(action sheet)和警告视图(alert)"></a>实现操作表单(action sheet)和警告视图(alert)</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@IBAction</span> <span class="function"><span class="keyword">func</span> <span class="title">buttonPressed</span><span class="params">(sender: UIButton)</span></span>&#123;</div><div class="line">  <span class="keyword">let</span> controller = <span class="type">UIAlertController</span>(title: <span class="string">"Are you sure?"</span>,message: <span class="literal">nil</span>,preferedStyle: .<span class="type">ActionSheet</span>)</div><div class="line"></div><div class="line">  <span class="keyword">let</span> yesACtion = <span class="type">UIAlertAction</span>(title: <span class="string">"yes,I`m sure"</span>,style: .<span class="type">Desturction</span>,handler: &#123; action <span class="keyword">in</span></div><div class="line">    <span class="keyword">let</span> msg = <span class="keyword">self</span>.nameField.text.isEmpty ? <span class="string">"you can breathe easy"</span> : <span class="string">"OK"</span></div><div class="line">    <span class="keyword">let</span> controller2 = <span class="type">UIAlertController</span>(title: <span class="string">"Done"</span>,message: mag,preferedStyle: .<span class="type">Alert</span>)</div><div class="line">    <span class="keyword">let</span> cancelAction = <span class="type">UIAlertAction</span>(title: <span class="string">"cancel"</span>,style: .<span class="type">Cancel</span>,handle: <span class="literal">nil</span>)</div><div class="line">    controller2.addAction(cancelAction)</div><div class="line"></div><div class="line">    <span class="keyword">self</span>.presentViewController(controller2,animated: <span class="literal">true</span>,completion: <span class="literal">nil</span>)</div><div class="line">  &#125;)</div><div class="line"></div><div class="line">  <span class="keyword">let</span> noAction = <span class="type">UIAlertAction</span>(title: <span class="string">"no"</span>,style: .<span class="type">Cancel</span>,handle: <span class="literal">nil</span>)</div><div class="line">  controller.addAction(yesACtion)</div><div class="line">  controller.addAction(noAction)</div><div class="line"></div><div class="line">    <span class="keyword">self</span>.presentViewController(controller,animated: <span class="literal">true</span>,completion: <span class="literal">nil</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2016 张俊啸
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script src="/js/main.js"></script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  </div>
</body>
</html>